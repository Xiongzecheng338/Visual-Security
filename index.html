<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>视觉欺骗艺术馆 - 探索不可能的世界</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'void': '#0a0a12',
                        'abyss': '#12121f',
                        'neon-cyan': '#00f5d4',
                        'neon-pink': '#ff006e',
                        'neon-purple': '#8338ec',
                        'neon-yellow': '#ffbe0b',
                        'glass': 'rgba(255, 255, 255, 0.05)',
                        'glass-border': 'rgba(255, 255, 255, 0.1)'
                    },
                    fontFamily: {
                        'display': ['Orbitron', 'sans-serif'],
                        'body': ['Inter', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { box-sizing: border-box; }
        body { 
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
        }
        .font-display { font-family: 'Orbitron', sans-serif; }
        
        /* 背景动画 */
        .bg-animated {
            background: linear-gradient(135deg, #0a0a12 0%, #1a1a2e 50%, #16213e 100%);
            position: relative;
        }
        .bg-animated::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(ellipse at 20% 20%, rgba(131, 56, 236, 0.15) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(0, 245, 212, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse at 50% 50%, rgba(255, 0, 110, 0.08) 0%, transparent 60%);
            pointer-events: none;
            z-index: 0;
        }
        
        /* 玻璃态效果 */
        .glass-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }
        
        /* 3D容器 */
        .perspective-container {
            perspective: 1500px;
            perspective-origin: 50% 50%;
        }
        
        /* 彭罗斯三角 */
        .penrose-triangle {
            position: relative;
            width: 280px;
            height: 280px;
            transform-style: preserve-3d;
            animation: float 6s ease-in-out infinite;
        }
        
        /* 内克尔方块 */
        .necker-cube {
            position: relative;
            width: 200px;
            height: 200px;
            transform-style: preserve-3d;
            animation: neckerFlip 4s ease-in-out infinite;
        }
        .necker-cube .face {
            position: absolute;
            width: 120px;
            height: 120px;
            border: 3px solid;
            background: transparent;
        }
        .necker-cube .front {
            border-color: #00f5d4;
            top: 40px;
            left: 20px;
        }
        .necker-cube .back {
            border-color: #ff006e;
            top: 0;
            left: 60px;
        }
        .necker-cube .connectors span {
            position: absolute;
            width: 3px;
            height: 60px;
            background: linear-gradient(to bottom, #8338ec, #00f5d4);
            transform-origin: top;
        }
        .necker-cube .connectors span:nth-child(1) { top: 0; left: 60px; transform: rotate(-33deg); }
        .necker-cube .connectors span:nth-child(2) { top: 0; left: 177px; transform: rotate(33deg); }
        .necker-cube .connectors span:nth-child(3) { top: 117px; left: 60px; transform: rotate(-33deg); }
        .necker-cube .connectors span:nth-child(4) { top: 117px; left: 177px; transform: rotate(33deg); }
        
        @keyframes neckerFlip {
            0%, 45% { transform: rotateX(0deg) rotateY(0deg); }
            50%, 95% { transform: rotateX(180deg) rotateY(0deg); }
            100% { transform: rotateX(360deg) rotateY(0deg); }
        }
        
        /* 赫尔曼栅格 */
        .hermann-grid {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 12px;
            padding: 20px;
            background: #000;
        }
        .hermann-grid .cell {
            width: 40px;
            height: 40px;
            background: #fff;
            transition: all 0.3s;
        }
        .hermann-grid:hover .cell {
            background: #f0f0f0;
        }
        .hermann-grid .cell:hover {
            background: #00f5d4 !important;
            transform: scale(1.1);
        }
        
        /* 穆勒-莱耶错觉 */
        .muller-lyer {
            display: flex;
            flex-direction: column;
            gap: 60px;
            padding: 40px;
        }
        .muller-lyer .line-group {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        .muller-lyer .line {
            width: 200px;
            height: 4px;
            background: #fff;
            position: relative;
        }
        .muller-lyer .arrow {
            width: 0;
            height: 0;
            border: 15px solid transparent;
        }
        .muller-lyer .arrow.outward-left {
            border-right-color: #00f5d4;
            margin-right: -15px;
        }
        .muller-lyer .arrow.outward-right {
            border-left-color: #00f5d4;
            margin-left: -15px;
            transform: rotate(180deg);
        }
        .muller-lyer .arrow.inward-left {
            border-right-color: #ff006e;
            margin-right: -15px;
            transform: rotate(180deg);
        }
        .muller-lyer .arrow.inward-right {
            border-left-color: #ff006e;
            margin-left: -15px;
        }
        
        /* 旋转蛇错觉 */
        .rotating-snakes {
            position: relative;
            width: 300px;
            height: 300px;
        }
        .snake-ring {
            position: absolute;
            border-radius: 50%;
            animation: snakeRotate 20s linear infinite;
        }
        .snake-ring:nth-child(1) {
            width: 280px;
            height: 280px;
            top: 10px;
            left: 10px;
            background: conic-gradient(
                from 0deg,
                #000 0deg 30deg,
                #8338ec 30deg 60deg,
                #fff 60deg 90deg,
                #ff006e 90deg 120deg,
                #000 120deg 150deg,
                #00f5d4 150deg 180deg,
                #fff 180deg 210deg,
                #ffbe0b 210deg 240deg,
                #000 240deg 270deg,
                #8338ec 270deg 300deg,
                #fff 300deg 330deg,
                #ff006e 330deg 360deg
            );
            animation-duration: 30s;
        }
        .snake-ring:nth-child(2) {
            width: 200px;
            height: 200px;
            top: 50px;
            left: 50px;
            background: conic-gradient(
                from 45deg,
                #fff 0deg 30deg,
                #00f5d4 30deg 60deg,
                #000 60deg 90deg,
                #ffbe0b 90deg 120deg,
                #fff 120deg 150deg,
                #8338ec 150deg 180deg,
                #000 180deg 210deg,
                #ff006e 210deg 240deg,
                #fff 240deg 270deg,
                #00f5d4 270deg 300deg,
                #000 300deg 330deg,
                #ffbe0b 330deg 360deg
            );
            animation-duration: 25s;
            animation-direction: reverse;
        }
        .snake-ring:nth-child(3) {
            width: 120px;
            height: 120px;
            top: 90px;
            left: 90px;
            background: conic-gradient(
                from 90deg,
                #000 0deg 30deg,
                #ff006e 30deg 60deg,
                #fff 60deg 90deg,
                #00f5d4 90deg 120deg,
                #000 120deg 150deg,
                #ffbe0b 150deg 180deg,
                #fff 180deg 210deg,
                #8338ec 210deg 240deg,
                #000 240deg 270deg,
                #ff006e 270deg 300deg,
                #fff 300deg 330deg,
                #00f5d4 330deg 360deg
            );
            animation-duration: 20s;
        }
        .snake-ring:nth-child(4) {
            width: 50px;
            height: 50px;
            top: 125px;
            left: 125px;
            background: #0a0a12;
        }
        
        @keyframes snakeRotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        /* 卡尼莎三角 */
        .kanizsa-triangle {
            position: relative;
            width: 280px;
            height: 280px;
        }
        .kanizsa-triangle .pacman {
            position: absolute;
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: #fff;
        }
        .kanizsa-triangle .pacman::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 50px;
            height: 50px;
            background: #0a0a12;
            transform-origin: 0 0;
        }
        .kanizsa-triangle .pacman:nth-child(1) {
            top: 0;
            left: 90px;
        }
        .kanizsa-triangle .pacman:nth-child(1)::after {
            transform: rotate(-60deg);
        }
        .kanizsa-triangle .pacman:nth-child(2) {
            bottom: 0;
            left: 0;
        }
        .kanizsa-triangle .pacman:nth-child(2)::after {
            transform: rotate(60deg);
        }
        .kanizsa-triangle .pacman:nth-child(3) {
            bottom: 0;
            right: 0;
        }
        .kanizsa-triangle .pacman:nth-child(3)::after {
            transform: rotate(180deg);
        }
        .kanizsa-triangle .center-triangle {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-left: 70px solid transparent;
            border-right: 70px solid transparent;
            border-bottom: 120px solid rgba(255, 255, 255, 0.1);
            transform: translate(-50%, -30%);
        }
        
        /* 艾宾浩斯错觉 */
        .ebbinghaus {
            position: relative;
            width: 300px;
            height: 200px;
            display: flex;
            justify-content: space-around;
            align-items: center;
        }
        .ebbinghaus .group {
            position: relative;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            width: 140px;
            height: 140px;
        }
        .ebbinghaus .center-circle {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #00f5d4;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
        }
        .ebbinghaus .surround {
            position: absolute;
            border-radius: 50%;
            background: #ff006e;
        }
        .ebbinghaus .group.left .surround {
            width: 20px;
            height: 20px;
        }
        .ebbinghaus .group.left .surround:nth-child(1) { top: 5px; left: 50%; transform: translateX(-50%); }
        .ebbinghaus .group.left .surround:nth-child(2) { top: 20px; right: 10px; }
        .ebbinghaus .group.left .surround:nth-child(3) { top: 50%; right: 0; transform: translateY(-50%); }
        .ebbinghaus .group.left .surround:nth-child(4) { bottom: 20px; right: 10px; }
        .ebbinghaus .group.left .surround:nth-child(5) { bottom: 5px; left: 50%; transform: translateX(-50%); }
        .ebbinghaus .group.left .surround:nth-child(6) { bottom: 20px; left: 10px; }
        .ebbinghaus .group.left .surround:nth-child(7) { top: 50%; left: 0; transform: translateY(-50%); }
        .ebbinghaus .group.left .surround:nth-child(8) { top: 20px; left: 10px; }
        
        .ebbinghaus .group.right .surround {
            width: 45px;
            height: 45px;
        }
        .ebbinghaus .group.right .surround:nth-child(1) { top: 0; left: 50%; transform: translateX(-50%); }
        .ebbinghaus .group.right .surround:nth-child(2) { top: 50%; right: 0; transform: translateY(-50%); }
        .ebbinghaus .group.right .surround:nth-child(3) { bottom: 0; left: 50%; transform: translateX(-50%); }
        .ebbinghaus .group.right .surround:nth-child(4) { top: 50%; left: 0; transform: translateY(-50%); }
        
        /* 咖啡墙错觉 */
        .cafe-wall {
            display: flex;
            flex-direction: column;
            gap: 4px;
            padding: 20px;
            background: #111;
        }
        .cafe-wall .row {
            display: flex;
            gap: 4px;
        }
        .cafe-wall .row:nth-child(even) {
            margin-left: 27px;
        }
        .cafe-wall .tile {
            width: 50px;
            height: 30px;
            transition: all 0.3s;
        }
        .cafe-wall .tile.black {
            background: #1a1a2e;
        }
        .cafe-wall .tile.white {
            background: #e0e0e0;
        }
        .cafe-wall .tile:hover {
            transform: scale(1.1);
            z-index: 10;
        }
        
        /* 不可能阶梯 */
        .penrose-stairs {
            position: relative;
            width: 280px;
            height: 280px;
            transform-style: preserve-3d;
        }
        .penrose-stairs .step {
            position: absolute;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #00f5d4 0%, #00b4a0 100%);
            border: 2px solid rgba(255, 255, 255, 0.3);
        }
        .penrose-stairs .step::after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 0;
            width: 100%;
            height: 15px;
            background: linear-gradient(to bottom, #008070, #006050);
        }
        .penrose-stairs .step:nth-child(1) { top: 20px; left: 20px; }
        .penrose-stairs .step:nth-child(2) { top: 20px; left: 90px; }
        .penrose-stairs .step:nth-child(3) { top: 20px; left: 160px; }
        .penrose-stairs .step:nth-child(4) { top: 90px; left: 160px; }
        .penrose-stairs .step:nth-child(5) { top: 160px; left: 160px; }
        .penrose-stairs .step:nth-child(6) { top: 160px; left: 90px; }
        .penrose-stairs .step:nth-child(7) { top: 160px; left: 20px; }
        .penrose-stairs .step:nth-child(8) { top: 90px; left: 20px; }
        
        /* 莫比乌斯环 */
        .mobius-strip {
            position: relative;
            width: 300px;
            height: 200px;
            transform-style: preserve-3d;
            animation: mobiusRotate 10s linear infinite;
        }
        .mobius-strip .segment {
            position: absolute;
            width: 30px;
            height: 80px;
            background: linear-gradient(to bottom, #00f5d4, #8338ec, #ff006e);
            border-radius: 5px;
            transform-origin: center center;
        }
        
        @keyframes mobiusRotate {
            from { transform: rotateY(0deg); }
            to { transform: rotateY(360deg); }
        }
        
        /* 萨金特错觉 */
        .sargent-illusion {
            position: relative;
            width: 300px;
            height: 200px;
        }
        .sargent-illusion .bar {
            position: absolute;
            height: 40px;
            background: linear-gradient(to right, #1a1a2e 0%, #3a3a4e 50%, #1a1a2e 100%);
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        .sargent-illusion .bar.horizontal {
            width: 200px;
            top: 80px;
            left: 50px;
        }
        .sargent-illusion .bar.vertical {
            width: 40px;
            height: 160px;
            top: 20px;
            left: 130px;
        }
        .sargent-illusion .overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, 
                transparent 0%, 
                rgba(0, 245, 212, 0.1) 25%, 
                transparent 50%, 
                rgba(255, 0, 110, 0.1) 75%, 
                transparent 100%);
            pointer-events: none;
        }
        
        /* 彭罗斯三角 SVG */
        .penrose-svg {
            width: 280px;
            height: 280px;
        }
        
        /* 按钮样式 */
        .illusion-btn {
            position: relative;
            padding: 12px 24px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            color: #fff;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            overflow: hidden;
        }
        .illusion-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.5s;
        }
        .illusion-btn:hover::before {
            left: 100%;
        }
        .illusion-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(0, 245, 212, 0.5);
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 245, 212, 0.2);
        }
        .illusion-btn.active {
            background: linear-gradient(135deg, rgba(0, 245, 212, 0.2), rgba(131, 56, 236, 0.2));
            border-color: #00f5d4;
        }
        
        /* 浮动动画 */
        @keyframes float {
            0%, 100% { transform: translateY(0) rotateY(0deg); }
            50% { transform: translateY(-20px) rotateY(180deg); }
        }
        
        /* 脉冲动画 */
        @keyframes pulse {
            0%, 100% { opacity: 0.5; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.05); }
        }
        
        /* 粒子效果 */
        .particle {
            position: fixed;
            width: 4px;
            height: 4px;
            background: radial-gradient(circle, #00f5d4 0%, transparent 70%);
            border-radius: 50%;
            pointer-events: none;
            z-index: 1000;
            animation: particleFade 1s ease-out forwards;
        }
        
        @keyframes particleFade {
            0% { opacity: 1; transform: scale(1); }
            100% { opacity: 0; transform: scale(0); }
        }
        
        /* 信息卡片 */
        .info-card {
            background: rgba(10, 10, 18, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 24px;
            margin-top: 24px;
        }
        
        /* 标签 */
        .tag {
            display: inline-block;
            padding: 4px 12px;
            background: rgba(0, 245, 212, 0.1);
            border: 1px solid rgba(0, 245, 212, 0.3);
            border-radius: 20px;
            font-size: 12px;
            color: #00f5d4;
            margin-right: 8px;
            margin-bottom: 8px;
        }
        
        /* 滚动条 */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #0a0a12;
        }
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(to bottom, #00f5d4, #8338ec);
            border-radius: 4px;
        }
        
        /* 响应式 */
        @media (max-width: 768px) {
            .illusion-container {
                transform: scale(0.7);
            }
        }
        
        /* 隐藏类 */
        .hidden { display: none !important; }
        
        /* 3D立方体 */
        .cube-3d {
            width: 150px;
            height: 150px;
            transform-style: preserve-3d;
            animation: cubeRotate 8s linear infinite;
        }
        .cube-3d .face {
            position: absolute;
            width: 150px;
            height: 150px;
            border: 2px solid;
            background: rgba(255, 255, 255, 0.03);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            backdrop-filter: blur(5px);
        }
        .cube-3d .face.front { 
            border-color: #00f5d4; 
            color: #00f5d4;
            transform: translateZ(75px); 
        }
        .cube-3d .face.back { 
            border-color: #ff006e; 
            color: #ff006e;
            transform: rotateY(180deg) translateZ(75px); 
        }
        .cube-3d .face.right { 
            border-color: #8338ec; 
            color: #8338ec;
            transform: rotateY(90deg) translateZ(75px); 
        }
        .cube-3d .face.left { 
            border-color: #ffbe0b; 
            color: #ffbe0b;
            transform: rotateY(-90deg) translateZ(75px); 
        }
        .cube-3d .face.top { 
            border-color: #00f5d4; 
            color: #00f5d4;
            transform: rotateX(90deg) translateZ(75px); 
        }
        .cube-3d .face.bottom { 
            border-color: #ff006e; 
            color: #ff006e;
            transform: rotateX(-90deg) translateZ(75px); 
        }
        
        @keyframes cubeRotate {
            from { transform: rotateX(0deg) rotateY(0deg); }
            to { transform: rotateX(360deg) rotateY(360deg); }
        }
        
        /* 德尔伯夫错觉 */
        .delboeuf {
            display: flex;
            justify-content: space-around;
            align-items: center;
            width: 300px;
            height: 200px;
        }
        .delboeuf .ring {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .delboeuf .ring::before {
            content: '';
            position: absolute;
            border-radius: 50%;
            border: 3px solid #ff006e;
        }
        .delboeuf .ring.small::before {
            width: 80px;
            height: 80px;
        }
        .delboeuf .ring.large::before {
            width: 140px;
            height: 140px;
        }
        .delboeuf .dot {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #00f5d4;
        }
        
        /* 佐尔拉错觉 */
        .zollner {
            position: relative;
            width: 280px;
            height: 280px;
            background: #0a0a12;
        }
        .zollner .line-group {
            position: absolute;
            display: flex;
            gap: 20px;
        }
        .zollner .main-line {
            width: 4px;
            height: 200px;
            background: #fff;
            position: relative;
        }
        .zollner .tick {
            position: absolute;
            width: 30px;
            height: 3px;
            background: #00f5d4;
            left: -13px;
        }
        .zollner .line-group:nth-child(1) { top: 40px; left: 20px; transform: rotate(-15deg); }
        .zollner .line-group:nth-child(2) { top: 40px; left: 70px; transform: rotate(15deg); }
        .zollner .line-group:nth-child(3) { top: 40px; left: 120px; transform: rotate(-15deg); }
        .zollner .line-group:nth-child(4) { top: 40px; left: 170px; transform: rotate(15deg); }
        .zollner .line-group:nth-child(5) { top: 40px; left: 220px; transform: rotate(-15deg); }
        
        /* 波根多夫错觉 */
        .poggendorff {
            position: relative;
            width: 280px;
            height: 200px;
        }
        .poggendorff .oblique {
            position: absolute;
            width: 4px;
            height: 120px;
            background: #00f5d4;
            transform-origin: bottom;
        }
        .poggendorff .oblique.left {
            top: 20px;
            left: 60px;
            transform: rotate(-30deg);
        }
        .poggendorff .oblique.right {
            top: 20px;
            right: 60px;
            transform: rotate(30deg);
        }
        .poggendorff .block {
            position: absolute;
            top: 60px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 80px;
            background: #1a1a2e;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        .poggendorff .continuation {
            position: absolute;
            width: 4px;
            height: 60px;
            background: #ff006e;
            opacity: 0.5;
        }
        .poggendorff .continuation.c1 {
            bottom: 20px;
            left: 100px;
            transform: rotate(-30deg);
            transform-origin: top;
        }
        .poggendorff .continuation.c2 {
            bottom: 20px;
            right: 100px;
            transform: rotate(30deg);
            transform-origin: top;
        }
        
        /* 导航样式 */
        .nav-link {
            position: relative;
            padding: 8px 16px;
            color: #a0a0a0;
            transition: all 0.3s;
        }
        .nav-link:hover, .nav-link.active {
            color: #fff;
        }
        .nav-link::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, #00f5d4, #8338ec);
            transition: all 0.3s;
            transform: translateX(-50%);
        }
        .nav-link:hover::after, .nav-link.active::after {
            width: 80%;
        }
        
        /* 页面过渡 */
        .page {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease;
            display: none;
        }
        .page.active {
            opacity: 1;
            transform: translateY(0);
            display: block;
        }
        
        /* 卡片悬停效果 */
        .illusion-card {
            transition: all 0.3s ease;
        }
        .illusion-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 245, 212, 0.15);
        }
        
        /* 进度条 */
        .progress-bar {
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            overflow: hidden;
        }
        .progress-bar .progress {
            height: 100%;
            background: linear-gradient(90deg, #00f5d4, #8338ec);
            border-radius: 2px;
            transition: width 0.5s ease;
        }
        
        /* 时间线 */
        .timeline {
            position: relative;
            padding-left: 30px;
        }
        .timeline::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(to bottom, #00f5d4, #8338ec, #ff006e);
        }
        .timeline-item {
            position: relative;
            padding-bottom: 30px;
        }
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -34px;
            top: 5px;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #00f5d4;
            border: 2px solid #0a0a12;
        }
        
        /* 公式样式 */
        .formula {
            font-family: 'Times New Roman', serif;
            font-style: italic;
            background: rgba(0, 245, 212, 0.1);
            padding: 15px 20px;
            border-radius: 10px;
            border-left: 3px solid #00f5d4;
            margin: 15px 0;
        }
        
        /* 引用样式 */
        .quote {
            position: relative;
            padding: 20px 30px;
            background: rgba(131, 56, 236, 0.1);
            border-radius: 15px;
            margin: 20px 0;
        }
        .quote::before {
            content: '"';
            position: absolute;
            top: -10px;
            left: 20px;
            font-size: 60px;
            color: rgba(131, 56, 236, 0.3);
            font-family: Georgia, serif;
        }
    </style>
</head>
<body class="bg-animated min-h-screen text-white">
    <!-- 导航栏 -->
    <nav class="fixed top-0 left-0 right-0 z-50 glass-card">
        <div class="max-w-7xl mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-3 cursor-pointer" onclick="showPage('home')">
                    <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-neon-cyan to-neon-purple flex items-center justify-center">
                        <i class="fas fa-eye text-white"></i>
                    </div>
                    <span class="font-display font-bold text-xl">视觉欺骗艺术馆</span>
                </div>
                
                <div class="hidden md:flex items-center gap-2">
                    <a class="nav-link active" onclick="showPage('home')" data-page="home">首页</a>
                    <a class="nav-link" onclick="showPage('gallery')" data-page="gallery">图库</a>
                    <a class="nav-link" onclick="showPage('learn')" data-page="learn">学习中心</a>
                    <a class="nav-link" onclick="showPage('about')" data-page="about">关于</a>
                </div>
                
                <div class="flex items-center gap-4">
                    <span class="text-sm text-gray-400 hidden sm:block">已探索: <span id="explored-count" class="text-neon-cyan font-bold">0</span> / <span id="total-count">15</span></span>
                    <button class="md:hidden text-white" onclick="toggleMobileMenu()">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
            
            <!-- 移动端菜单 -->
            <div id="mobile-menu" class="md:hidden mt-4 pb-2 hidden">
                <div class="flex flex-col gap-2">
                    <a class="nav-link active" onclick="showPage('home'); toggleMobileMenu();" data-page="home">首页</a>
                    <a class="nav-link" onclick="showPage('gallery'); toggleMobileMenu();" data-page="gallery">图库</a>
                    <a class="nav-link" onclick="showPage('learn'); toggleMobileMenu();" data-page="learn">学习中心</a>
                    <a class="nav-link" onclick="showPage('about'); toggleMobileMenu();" data-page="about">关于</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- 主内容区 -->
    <main class="pt-24 pb-12 px-4 relative z-10">
        <div class="max-w-7xl mx-auto">
            
            <!-- 首页 -->
            <div id="page-home" class="page active">
                <!-- Hero区域 -->
                <section class="text-center mb-16">
                    <h1 class="font-display text-4xl md:text-6xl font-black mb-6 bg-gradient-to-r from-neon-cyan via-neon-purple to-neon-pink bg-clip-text text-transparent">
                        探索不可能的世界
                    </h1>
                    <p class="text-gray-400 text-lg max-w-3xl mx-auto mb-8">
                        欢迎来到视觉欺骗艺术馆，这里汇集了人类历史上最迷人的视觉错觉与不可能图形。
                        通过互动体验和深度学习，揭开大脑感知世界的神秘面纱。
                    </p>
                    <div class="flex flex-wrap justify-center gap-4">
                        <button onclick="showPage('gallery')" class="illusion-btn px-8 py-3">
                            <i class="fas fa-play mr-2"></i>开始探索
                        </button>
                        <button onclick="showPage('learn')" class="illusion-btn px-8 py-3">
                            <i class="fas fa-book mr-2"></i>学习原理
                        </button>
                    </div>
                </section>
                
                <!-- 特色展示 -->
                <section class="mb-16">
                    <h2 class="font-display text-2xl font-bold mb-8 text-center">
                        <i class="fas fa-star text-neon-yellow mr-3"></i>
                        精选视觉奇迹
                    </h2>
                    <div class="grid md:grid-cols-3 gap-6">
                        <!-- 彭罗斯三角 -->
                        <div class="glass-card rounded-3xl p-6 illusion-card cursor-pointer" onclick="showIllusionDetail(0)">
                            <div class="h-48 flex items-center justify-center mb-4">
                                <svg viewBox="0 0 200 200" class="w-40 h-40">
                                    <defs>
                                        <linearGradient id="homeGrad1" x1="0%" y1="0%" x2="100%" y2="100%">
                                            <stop offset="0%" style="stop-color:#00f5d4"/>
                                            <stop offset="100%" style="stop-color:#00b4a0"/>
                                        </linearGradient>
                                        <linearGradient id="homeGrad2" x1="0%" y1="0%" x2="100%" y2="100%">
                                            <stop offset="0%" style="stop-color:#ff006e"/>
                                            <stop offset="100%" style="stop-color:#c0005a"/>
                                        </linearGradient>
                                        <linearGradient id="homeGrad3" x1="0%" y1="0%" x2="100%" y2="100%">
                                            <stop offset="0%" style="stop-color:#8338ec"/>
                                            <stop offset="100%" style="stop-color:#6020c0"/>
                                        </linearGradient>
                                    </defs>
                                    <polygon points="30,170 30,100 100,100 100,130 60,130 60,170" fill="url(#homeGrad1)"/>
                                    <polygon points="170,170 170,100 100,100 100,130 140,130 140,170" fill="url(#homeGrad2)"/>
                                    <polygon points="100,30 100,100 130,100 130,60 170,60 170,30" fill="url(#homeGrad3)"/>
                                </svg>
                            </div>
                            <h3 class="font-display text-xl font-bold mb-2">彭罗斯三角</h3>
                            <p class="text-gray-400 text-sm mb-4">最著名的不可能图形，挑战三维空间的认知边界</p>
                            <div class="flex items-center justify-between">
                                <div class="flex gap-1">
                                    <i class="fas fa-star text-neon-yellow text-sm"></i>
                                    <i class="fas fa-star text-neon-yellow text-sm"></i>
                                    <i class="fas fa-star text-neon-yellow text-sm"></i>
                                    <i class="fas fa-star text-neon-yellow text-sm"></i>
                                    <i class="fas fa-star text-gray-600 text-sm"></i>
                                </div>
                                <span class="text-neon-cyan text-sm">点击探索 <i class="fas fa-arrow-right ml-1"></i></span>
                            </div>
                        </div>
                        
                        <!-- 旋转蛇 -->
                        <div class="glass-card rounded-3xl p-6 illusion-card cursor-pointer" onclick="showIllusionDetail(4)">
                            <div class="h-48 flex items-center justify-center mb-4">
                                <div class="w-36 h-36 rounded-full" style="background: conic-gradient(from 0deg, #000 0deg 30deg, #8338ec 30deg 60deg, #fff 60deg 90deg, #ff006e 90deg 120deg, #000 120deg 150deg, #00f5d4 150deg 180deg, #fff 180deg 210deg, #ffbe0b 210deg 240deg, #000 240deg 270deg, #8338ec 270deg 300deg, #fff 300deg 330deg, #ff006e 330deg 360deg); animation: snakeRotate 20s linear infinite;"></div>
                            </div>
                            <h3 class="font-display text-xl font-bold mb-2">旋转蛇错觉</h3>
                            <p class="text-gray-400 text-sm mb-4">静止图像产生运动错觉，揭示视觉处理的时间差</p>
                            <div class="flex items-center justify-between">
                                <div class="flex gap-1">
                                    <i class="fas fa-star text-neon-yellow text-sm"></i>
                                    <i class="fas fa-star text-neon-yellow text-sm"></i>
                                    <i class="fas fa-star text-neon-yellow text-sm"></i>
                                    <i class="fas fa-star text-neon-yellow text-sm"></i>
                                    <i class="fas fa-star text-neon-yellow text-sm"></i>
                                </div>
                                <span class="text-neon-cyan text-sm">点击探索 <i class="fas fa-arrow-right ml-1"></i></span>
                            </div>
                        </div>
                        
                        <!-- 内克尔方块 -->
                        <div class="glass-card rounded-3xl p-6 illusion-card cursor-pointer" onclick="showIllusionDetail(1)">
                            <div class="h-48 flex items-center justify-center mb-4">
                                <div class="relative w-32 h-32">
                                    <div class="absolute border-2 border-neon-cyan w-20 h-20" style="top: 30px; left: 10px;"></div>
                                    <div class="absolute border-2 border-neon-pink w-20 h-20" style="top: 0; left: 40px;"></div>
                                    <div class="absolute w-0.5 h-12 bg-gradient-to-b from-neon-purple to-neon-cyan" style="top: 0; left: 40px; transform: rotate(-33deg); transform-origin: top;"></div>
                                    <div class="absolute w-0.5 h-12 bg-gradient-to-b from-neon-purple to-neon-cyan" style="top: 0; left: 118px; transform: rotate(33deg); transform-origin: top;"></div>
                                    <div class="absolute w-0.5 h-12 bg-gradient-to-b from-neon-purple to-neon-cyan" style="top: 88px; left: 40px; transform: rotate(-33deg); transform-origin: top;"></div>
                                    <div class="absolute w-0.5 h-12 bg-gradient-to-b from-neon-purple to-neon-cyan" style="top: 88px; left: 118px; transform: rotate(33deg); transform-origin: top;"></div>
                                </div>
                            </div>
                            <h3 class="font-display text-xl font-bold mb-2">内克尔方块</h3>
                            <p class="text-gray-400 text-sm mb-4">双稳态感知的经典案例，大脑如何在两种解释间切换</p>
                            <div class="flex items-center justify-between">
                                <div class="flex gap-1">
                                    <i class="fas fa-star text-neon-yellow text-sm"></i>
                                    <i class="fas fa-star text-neon-yellow text-sm"></i>
                                    <i class="fas fa-star text-neon-yellow text-sm"></i>
                                    <i class="fas fa-star text-neon-yellow text-sm"></i>
                                    <i class="fas fa-star text-neon-yellow text-sm"></i>
                                </div>
                                <span class="text-neon-cyan text-sm">点击探索 <i class="fas fa-arrow-right ml-1"></i></span>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- 学习路径 -->
                <section class="mb-16">
                    <h2 class="font-display text-2xl font-bold mb-8 text-center">
                        <i class="fas fa-route text-neon-purple mr-3"></i>
                        学习路径
                    </h2>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="glass-card rounded-3xl p-6">
                            <div class="flex items-center gap-4 mb-4">
                                <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-neon-cyan/20 to-neon-purple/20 flex items-center justify-center">
                                    <i class="fas fa-graduation-cap text-neon-cyan text-xl"></i>
                                </div>
                                <div>
                                    <h3 class="font-display font-bold">初学者路径</h3>
                                    <p class="text-gray-400 text-sm">适合刚接触视觉错觉的学习者</p>
                                </div>
                            </div>
                            <div class="space-y-3">
                                <div class="flex items-center gap-3 text-sm">
                                    <span class="w-6 h-6 rounded-full bg-neon-cyan/20 flex items-center justify-center text-neon-cyan">1</span>
                                    <span>了解视觉系统的基本工作原理</span>
                                </div>
                                <div class="flex items-center gap-3 text-sm">
                                    <span class="w-6 h-6 rounded-full bg-neon-cyan/20 flex items-center justify-center text-neon-cyan">2</span>
                                    <span>体验基础的几何错觉</span>
                                </div>
                                <div class="flex items-center gap-3 text-sm">
                                    <span class="w-6 h-6 rounded-full bg-neon-cyan/20 flex items-center justify-center text-neon-cyan">3</span>
                                    <span>探索不可能图形的世界</span>
                                </div>
                            </div>
                            <button onclick="showPage('learn')" class="w-full mt-4 py-2 rounded-xl border border-neon-cyan/30 text-neon-cyan hover:bg-neon-cyan/10 transition-all">
                                开始学习
                            </button>
                        </div>
                        
                        <div class="glass-card rounded-3xl p-6">
                            <div class="flex items-center gap-4 mb-4">
                                <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-neon-pink/20 to-neon-yellow/20 flex items-center justify-center">
                                    <i class="fas fa-flask text-neon-pink text-xl"></i>
                                </div>
                                <div>
                                    <h3 class="font-display font-bold">进阶路径</h3>
                                    <p class="text-gray-400 text-sm">深入理解数学与物理学原理</p>
                                </div>
                            </div>
                            <div class="space-y-3">
                                <div class="flex items-center gap-3 text-sm">
                                    <span class="w-6 h-6 rounded-full bg-neon-pink/20 flex items-center justify-center text-neon-pink">1</span>
                                    <span>学习神经科学与认知心理学</span>
                                </div>
                                <div class="flex items-center gap-3 text-sm">
                                    <span class="w-6 h-6 rounded-full bg-neon-pink/20 flex items-center justify-center text-neon-pink">2</span>
                                    <span>探索拓扑学与投影几何</span>
                                </div>
                                <div class="flex items-center gap-3 text-sm">
                                    <span class="w-6 h-6 rounded-full bg-neon-pink/20 flex items-center justify-center text-neon-pink">3</span>
                                    <span>研究视觉错觉的艺术应用</span>
                                </div>
                            </div>
                            <button onclick="showPage('learn')" class="w-full mt-4 py-2 rounded-xl border border-neon-pink/30 text-neon-pink hover:bg-neon-pink/10 transition-all">
                                开始学习
                            </button>
                        </div>
                    </div>
                </section>
                
                <!-- 统计数据 -->
                <section class="mb-16">
                    <div class="glass-card rounded-3xl p-8">
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-8 text-center">
                            <div>
                                <div class="text-4xl font-display font-bold text-neon-cyan mb-2">15+</div>
                                <div class="text-gray-400">经典错觉</div>
                            </div>
                            <div>
                                <div class="text-4xl font-display font-bold text-neon-pink mb-2">200+</div>
                                <div class="text-gray-400">互动体验</div>
                            </div>
                            <div>
                                <div class="text-4xl font-display font-bold text-neon-purple mb-2">50+</div>
                                <div class="text-gray-400">原理讲解</div>
                            </div>
                            <div>
                                <div class="text-4xl font-display font-bold text-neon-yellow mb-2">∞</div>
                                <div class="text-gray-400">探索乐趣</div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
            
            <!-- 图库页面 -->
            <div id="page-gallery" class="page">
                <header class="text-center mb-12">
                    <h1 class="font-display text-3xl md:text-4xl font-black mb-4">视觉错觉图库</h1>
                    <p class="text-gray-400 max-w-2xl mx-auto">点击任意图形开始你的探索之旅，每个图形都包含详细的原理讲解和互动体验</p>
                </header>
                
                <!-- 分类筛选 -->
                <div class="flex flex-wrap justify-center gap-3 mb-8">
                    <button class="category-btn illusion-btn active" data-category="all">
                        <i class="fas fa-th-large mr-2"></i>全部
                    </button>
                    <button class="category-btn illusion-btn" data-category="impossible">
                        <i class="fas fa-cube mr-2"></i>不可能图形
                    </button>
                    <button class="category-btn illusion-btn" data-category="geometric">
                        <i class="fas fa-shapes mr-2"></i>几何错觉
                    </button>
                    <button class="category-btn illusion-btn" data-category="motion">
                        <i class="fas fa-sync-alt mr-2"></i>运动错觉
                    </button>
                    <button class="category-btn illusion-btn" data-category="cognitive">
                        <i class="fas fa-brain mr-2"></i>认知错觉
                    </button>
                </div>
                
                <!-- 图库网格 -->
                <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6" id="gallery-grid">
                    <!-- 将通过JS动态生成 -->
                </div>
            </div>
            
            <!-- 学习中心页面 -->
            <div id="page-learn" class="page">
                <header class="text-center mb-12">
                    <h1 class="font-display text-3xl md:text-4xl font-black mb-4">学习中心</h1>
                    <p class="text-gray-400 max-w-2xl mx-auto">深入理解视觉错觉背后的科学原理，从神经科学到数学几何</p>
                </header>
                
                <div class="grid lg:grid-cols-3 gap-8">
                    <!-- 左侧导航 -->
                    <div class="lg:col-span-1">
                        <div class="glass-card rounded-3xl p-6 sticky top-24">
                            <h3 class="font-display font-bold mb-4">学习模块</h3>
                            <div class="space-y-2">
                                <button class="learn-nav-btn w-full text-left p-3 rounded-xl hover:bg-white/5 transition-all active" data-module="neuroscience">
                                    <i class="fas fa-brain text-neon-cyan mr-3"></i>神经科学基础
                                </button>
                                <button class="learn-nav-btn w-full text-left p-3 rounded-xl hover:bg-white/5 transition-all" data-module="mathematics">
                                    <i class="fas fa-calculator text-neon-pink mr-3"></i>数学原理
                                </button>
                                <button class="learn-nav-btn w-full text-left p-3 rounded-xl hover:bg-white/5 transition-all" data-module="physics">
                                    <i class="fas fa-atom text-neon-purple mr-3"></i>物理学解释
                                </button>
                                <button class="learn-nav-btn w-full text-left p-3 rounded-xl hover:bg-white/5 transition-all" data-module="art">
                                    <i class="fas fa-palette text-neon-yellow mr-3"></i>艺术应用
                                </button>
                            </div>
                            
                            <div class="mt-6 pt-6 border-t border-white/10">
                                <h4 class="text-sm text-gray-400 mb-3">学习进度</h4>
                                <div class="progress-bar mb-2">
                                    <div class="progress" style="width: 25%"></div>
                                </div>
                                <p class="text-xs text-gray-500">已完成 1/4 模块</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 右侧内容 -->
                    <div class="lg:col-span-2">
                        <!-- 神经科学基础 -->
                        <div id="module-neuroscience" class="learn-module">
                            <div class="glass-card rounded-3xl p-8 mb-6">
                                <h2 class="font-display text-2xl font-bold mb-6">
                                    <i class="fas fa-brain text-neon-cyan mr-3"></i>
                                    神经科学基础
                                </h2>
                                
                                <div class="prose prose-invert max-w-none">
                                    <h3 class="text-xl font-bold mb-4 text-white">视觉系统的工作原理</h3>
                                    <p class="text-gray-300 mb-4">
                                        人眼是一个复杂的光学系统，而视觉感知则是大脑对视觉信息的解释过程。当光线进入眼睛后，会经过角膜、瞳孔、晶状体，最终投射到视网膜上。视网膜上约有1.2亿个视杆细胞和600万个视锥细胞，它们将光信号转换为神经电信号。
                                    </p>
                                    
                                    <div class="quote">
                                        <p class="text-gray-300">
                                            "我们看到的不是世界的本来面目，而是我们自己的面目。"
                                        </p>
                                        <p class="text-neon-cyan text-sm mt-2">— 阿奈·宁</p>
                                    </div>
                                    
                                    <h3 class="text-xl font-bold mb-4 mt-6 text-white">视觉处理通路</h3>
                                    <p class="text-gray-300 mb-4">
                                        视觉信息从视网膜出发，经过视神经、视交叉、外侧膝状体，最终到达大脑皮层的视觉中枢（V1-V5区域）。这个过程涉及两个主要通路：
                                    </p>
                                    
                                    <div class="grid md:grid-cols-2 gap-4 mb-6">
                                        <div class="bg-neon-cyan/10 rounded-xl p-4">
                                            <h4 class="font-bold text-neon-cyan mb-2">腹侧通路（"是什么"通路）</h4>
                                            <p class="text-sm text-gray-300">负责物体识别、颜色感知、形状识别，从V1延伸到颞叶。</p>
                                        </div>
                                        <div class="bg-neon-pink/10 rounded-xl p-4">
                                            <h4 class="font-bold text-neon-pink mb-2">背侧通路（"在哪里"通路）</h4>
                                            <p class="text-sm text-gray-300">负责空间定位、运动感知、深度判断，从V1延伸到顶叶。</p>
                                        </div>
                                    </div>
                                    
                                    <h3 class="text-xl font-bold mb-4 text-white">为什么会产生视觉错觉？</h3>
                                    <p class="text-gray-300 mb-4">
                                        视觉错觉的产生源于大脑处理信息的方式。大脑不是被动地接收信息，而是主动地解释和预测。这种"自上而下"的处理方式虽然通常能帮助我们快速理解世界，但在某些特殊情况下会导致错误。
                                    </p>
                                    
                                    <div class="timeline">
                                        <div class="timeline-item">
                                            <h4 class="font-bold text-neon-cyan mb-2">侧抑制</h4>
                                            <p class="text-sm text-gray-300">当某个神经元被激活时，它会抑制周围神经元的活动。这是赫尔曼栅格等错觉的神经基础。</p>
                                        </div>
                                        <div class="timeline-item">
                                            <h4 class="font-bold text-neon-cyan mb-2">填充效应</h4>
                                            <p class="text-sm text-gray-300">大脑会自动"填补"缺失的信息，这是卡尼莎三角等主观轮廓错觉的原因。</p>
                                        </div>
                                        <div class="timeline-item">
                                            <h4 class="font-bold text-neon-cyan mb-2">深度线索冲突</h4>
                                            <p class="text-sm text-gray-300">当不同的深度线索给出矛盾信息时，大脑无法正确解释三维结构，产生不可能图形。</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 互动实验 -->
                            <div class="glass-card rounded-3xl p-8">
                                <h3 class="font-display text-xl font-bold mb-4">
                                    <i class="fas fa-flask text-neon-purple mr-2"></i>
                                    互动实验：盲点测试
                                </h3>
                                <p class="text-gray-300 mb-4">
                                    每只眼睛都有一个盲点，那里没有感光细胞。但我们在日常生活中从未注意到这个"洞"，因为大脑会用周围的信息来填充它。
                                </p>
                                <div class="bg-black/30 rounded-xl p-6 text-center">
                                    <p class="text-sm text-gray-400 mb-4">闭上右眼，用左眼注视右边的十字，慢慢靠近屏幕...</p>
                                    <div class="flex justify-center items-center gap-20">
                                        <div class="w-8 h-8 bg-neon-cyan rounded-full"></div>
                                        <div class="text-4xl text-white">+</div>
                                    </div>
                                    <p class="text-sm text-gray-400 mt-4">在某个距离，圆点会消失！</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 数学原理 -->
                        <div id="module-mathematics" class="learn-module hidden">
                            <div class="glass-card rounded-3xl p-8 mb-6">
                                <h2 class="font-display text-2xl font-bold mb-6">
                                    <i class="fas fa-calculator text-neon-pink mr-3"></i>
                                    数学原理
                                </h2>
                                
                                <div class="prose prose-invert max-w-none">
                                    <h3 class="text-xl font-bold mb-4 text-white">投影几何与不可能图形</h3>
                                    <p class="text-gray-300 mb-4">
                                        不可能图形的数学基础在于投影几何。当三维物体被投影到二维平面时，会丢失深度信息。彭罗斯三角等图形利用了这种信息丢失，创造了局部合理但全局矛盾的投影。
                                    </p>
                                    
                                    <div class="formula">
                                        <p class="text-center text-lg">
                                            投影变换: (x, y, z) → (x/z, y/z)
                                        </p>
                                        <p class="text-center text-sm text-gray-400 mt-2">
                                            三维坐标到二维平面的透视投影
                                        </p>
                                    </div>
                                    
                                    <h3 class="text-xl font-bold mb-4 mt-6 text-white">拓扑学与莫比乌斯环</h3>
                                    <p class="text-gray-300 mb-4">
                                        莫比乌斯环是拓扑学中最著名的对象之一。它只有一个面和一条边界，这可以通过数学严格证明。
                                    </p>
                                    
                                    <div class="formula">
                                        <p class="text-center text-lg">
                                            参数方程: x(u,v) = (1 + v/2 · cos(u/2)) · cos(u)
                                        </p>
                                        <p class="text-center text-lg">
                                            y(u,v) = (1 + v/2 · cos(u/2)) · sin(u)
                                        </p>
                                        <p class="text-center text-lg">
                                            z(u,v) = v/2 · sin(u/2)
                                        </p>
                                        <p class="text-center text-sm text-gray-400 mt-2">
                                            u ∈ [0, 2π], v ∈ [-1, 1]
                                        </p>
                                    </div>
                                    
                                    <h3 class="text-xl font-bold mb-4 mt-6 text-white">分形与视觉错觉</h3>
                                    <p class="text-gray-300 mb-4">
                                        某些视觉错觉与分形几何有关。分形是自相似的几何结构，在不同尺度上呈现相同的模式。这种特性可以用来创造无限重复的视觉图案。
                                    </p>
                                    
                                    <div class="formula">
                                        <p class="text-center text-lg">
                                            分形维度: D = log(N) / log(S)
                                        </p>
                                        <p class="text-center text-sm text-gray-400 mt-2">
                                            N = 自相似片数, S = 缩放因子
                                        </p>
                                    </div>
                                    
                                    <h3 class="text-xl font-bold mb-4 mt-6 text-white">几何错觉的数学分析</h3>
                                    <p class="text-gray-300 mb-4">
                                        许多几何错觉可以用数学方法分析。例如，穆勒-莱耶错觉中，箭头的角度会影响感知长度的偏差程度。
                                    </p>
                                    
                                    <div class="formula">
                                        <p class="text-center text-lg">
                                            感知偏差 ≈ k · tan(θ/2)
                                        </p>
                                        <p class="text-center text-sm text-gray-400 mt-2">
                                            θ = 箭头角度, k = 常数
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 物理学解释 -->
                        <div id="module-physics" class="learn-module hidden">
                            <div class="glass-card rounded-3xl p-8 mb-6">
                                <h2 class="font-display text-2xl font-bold mb-6">
                                    <i class="fas fa-atom text-neon-purple mr-3"></i>
                                    物理学解释
                                </h2>
                                
                                <div class="prose prose-invert max-w-none">
                                    <h3 class="text-xl font-bold mb-4 text-white">光学基础</h3>
                                    <p class="text-gray-300 mb-4">
                                        视觉错觉与光学原理密切相关。光的传播、反射、折射等基本现象为许多错觉提供了物理基础。
                                    </p>
                                    
                                    <div class="grid md:grid-cols-2 gap-4 mb-6">
                                        <div class="bg-neon-purple/10 rounded-xl p-4">
                                            <h4 class="font-bold text-neon-purple mb-2">光的传播</h4>
                                            <p class="text-sm text-gray-300">光在均匀介质中沿直线传播，这解释了为什么我们可以用几何光学来分析视觉系统。</p>
                                        </div>
                                        <div class="bg-neon-cyan/10 rounded-xl p-4">
                                            <h4 class="font-bold text-neon-cyan mb-2">成像原理</h4>
                                            <p class="text-sm text-gray-300">眼睛的成像遵循凸透镜成像规律：1/u + 1/v = 1/f</p>
                                        </div>
                                    </div>
                                    
                                    <h3 class="text-xl font-bold mb-4 mt-6 text-white">时间与运动错觉</h3>
                                    <p class="text-gray-300 mb-4">
                                        旋转蛇等运动错觉可以用视觉处理的时间延迟来解释。当不同亮度的区域刺激视网膜时，视觉系统处理它们需要不同的时间，这种时间差被大脑解释为运动。
                                    </p>
                                    
                                    <div class="formula">
                                        <p class="text-center text-lg">
                                            处理时间差: Δt = t_bright - t_dark
                                        </p>
                                        <p class="text-center text-sm text-gray-400 mt-2">
                                            亮区域处理更快，暗区域处理更慢
                                        </p>
                                    </div>
                                    
                                    <h3 class="text-xl font-bold mb-4 mt-6 text-white">色彩与感知</h3>
                                    <p class="text-gray-300 mb-4">
                                        色彩感知涉及物理和生理两个方面。光的波长决定了颜色，但大脑的解释会影响我们看到的色彩。
                                    </p>
                                    
                                    <div class="quote">
                                        <p class="text-gray-300">
                                            "颜色不是物体的属性，而是光与物质相互作用的结果，以及大脑对这种作用的解释。"
                                        </p>
                                        <p class="text-neon-purple text-sm mt-2">— 艾萨克·牛顿</p>
                                    </div>
                                    
                                    <h3 class="text-xl font-bold mb-4 mt-6 text-white">量子力学与视觉</h3>
                                    <p class="text-gray-300 mb-4">
                                        在最基础的层面上，视觉始于光子与视网膜上感光分子的量子相互作用。单个光子就足以激活视杆细胞，这展示了视觉系统的惊人灵敏度。
                                    </p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 艺术应用 -->
                        <div id="module-art" class="learn-module hidden">
                            <div class="glass-card rounded-3xl p-8 mb-6">
                                <h2 class="font-display text-2xl font-bold mb-6">
                                    <i class="fas fa-palette text-neon-yellow mr-3"></i>
                                    艺术应用
                                </h2>
                                
                                <div class="prose prose-invert max-w-none">
                                    <h3 class="text-xl font-bold mb-4 text-white">M.C. 埃舍尔：不可能世界的建筑师</h3>
                                    <p class="text-gray-300 mb-4">
                                        荷兰艺术家M.C.埃舍尔（Maurits Cornelis Escher）是将数学概念与视觉艺术完美结合的大师。他的作品深入探索了不可能图形、对称性、无限循环等主题。
                                    </p>
                                    
                                    <div class="grid md:grid-cols-2 gap-4 mb-6">
                                        <div class="bg-neon-yellow/10 rounded-xl p-4">
                                            <h4 class="font-bold text-neon-yellow mb-2">《上升与下降》(1960)</h4>
                                            <p class="text-sm text-gray-300">基于彭罗斯阶梯创作，展示了一群僧侣在不可能的楼梯上无限循环行走的场景。</p>
                                        </div>
                                        <div class="bg-neon-cyan/10 rounded-xl p-4">
                                            <h4 class="font-bold text-neon-cyan mb-2">《瀑布》(1961)</h4>
                                            <p class="text-sm text-gray-300">利用彭罗斯三角的原理，创造了永动机般的瀑布幻象。</p>
                                        </div>
                                    </div>
                                    
                                    <h3 class="text-xl font-bold mb-4 mt-6 text-white">欧普艺术（Op Art）</h3>
                                    <p class="text-gray-300 mb-4">
                                        欧普艺术是20世纪60年代兴起的艺术运动，专注于创造视觉错觉和运动感。代表艺术家包括维克多·瓦萨雷利和布里奇特·赖利。
                                    </p>
                                    
                                    <div class="quote">
                                        <p class="text-gray-300">
                                            "艺术不是你所看到的，而是你让别人看到的。"
                                        </p>
                                        <p class="text-neon-yellow text-sm mt-2">— 埃德加·德加</p>
                                    </div>
                                    
                                    <h3 class="text-xl font-bold mb-4 mt-6 text-white">现代应用</h3>
                                    <p class="text-gray-300 mb-4">
                                        视觉错觉原理在现代设计中有广泛应用：
                                    </p>
                                    
                                    <div class="timeline">
                                        <div class="timeline-item">
                                            <h4 class="font-bold text-neon-yellow mb-2">建筑设计</h4>
                                            <p class="text-sm text-gray-300">利用透视和比例创造空间错觉，使建筑看起来更大或更有趣。</p>
                                        </div>
                                        <div class="timeline-item">
                                            <h4 class="font-bold text-neon-yellow mb-2">平面设计</h4>
                                            <p class="text-sm text-gray-300">在标志、海报和包装设计中使用错觉原理吸引注意力。</p>
                                        </div>
                                        <div class="timeline-item">
                                            <h4 class="font-bold text-neon-yellow mb-2">电影特效</h4>
                                            <p class="text-sm text-gray-300">强迫透视等技术用于创造视觉奇观，如《指环王》中的霍比特人。</p>
                                        </div>
                                        <div class="timeline-item">
                                            <h4 class="font-bold text-neon-yellow mb-2">虚拟现实</h4>
                                            <p class="text-sm text-gray-300">VR技术依赖于对视觉系统的理解，创造沉浸式体验。</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 关于页面 -->
            <div id="page-about" class="page">
                <header class="text-center mb-12">
                    <h1 class="font-display text-3xl md:text-4xl font-black mb-4">关于视觉欺骗艺术馆</h1>
                    <p class="text-gray-400 max-w-2xl mx-auto">探索这个项目的起源、目的和未来愿景</p>
                </header>
                
                <div class="grid md:grid-cols-2 gap-8">
                    <div class="glass-card rounded-3xl p-8">
                        <h3 class="font-display text-xl font-bold mb-4">
                            <i class="fas fa-lightbulb text-neon-cyan mr-2"></i>
                            项目起源
                        </h3>
                        <p class="text-gray-300 mb-4">
                            视觉欺骗艺术馆诞生于对人类感知系统的好奇心。当我们发现眼睛可以被"欺骗"时，这揭示的不仅是视觉系统的局限，更是大脑处理信息的奇妙方式。
                        </p>
                        <p class="text-gray-300">
                            这个项目旨在收集、展示和解释世界上最迷人的视觉错觉，让每个人都能体验认知科学的魅力。
                        </p>
                    </div>
                    
                    <div class="glass-card rounded-3xl p-8">
                        <h3 class="font-display text-xl font-bold mb-4">
                            <i class="fas fa-bullseye text-neon-pink mr-2"></i>
                            项目目标
                        </h3>
                        <ul class="space-y-3 text-gray-300">
                            <li class="flex items-start gap-3">
                                <i class="fas fa-check text-neon-cyan mt-1"></i>
                                <span>提供高质量的视觉错觉互动体验</span>
                            </li>
                            <li class="flex items-start gap-3">
                                <i class="fas fa-check text-neon-cyan mt-1"></i>
                                <span>深入解释背后的科学原理</span>
                            </li>
                            <li class="flex items-start gap-3">
                                <i class="fas fa-check text-neon-cyan mt-1"></i>
                                <span>激发对认知科学的兴趣</span>
                            </li>
                            <li class="flex items-start gap-3">
                                <i class="fas fa-check text-neon-cyan mt-1"></i>
                                <span>连接艺术与科学的桥梁</span>
                            </li>
                        </ul>
                    </div>
                    
                    <div class="glass-card rounded-3xl p-8 md:col-span-2">
                        <h3 class="font-display text-xl font-bold mb-4">
                            <i class="fas fa-users text-neon-purple mr-2"></i>
                            适合人群
                        </h3>
                        <div class="grid sm:grid-cols-2 md:grid-cols-4 gap-4">
                            <div class="bg-white/5 rounded-xl p-4 text-center">
                                <i class="fas fa-user-graduate text-3xl text-neon-cyan mb-2"></i>
                                <h4 class="font-bold mb-1">学生</h4>
                                <p class="text-sm text-gray-400">学习认知科学和心理学</p>
                            </div>
                            <div class="bg-white/5 rounded-xl p-4 text-center">
                                <i class="fas fa-paint-brush text-3xl text-neon-pink mb-2"></i>
                                <h4 class="font-bold mb-1">设计师</h4>
                                <p class="text-sm text-gray-400">获取创意灵感</p>
                            </div>
                            <div class="bg-white/5 rounded-xl p-4 text-center">
                                <i class="fas fa-chalkboard-teacher text-3xl text-neon-purple mb-2"></i>
                                <h4 class="font-bold mb-1">教育者</h4>
                                <p class="text-sm text-gray-400">教学演示工具</p>
                            </div>
                            <div class="bg-white/5 rounded-xl p-4 text-center">
                                <i class="fas fa-child text-3xl text-neon-yellow mb-2"></i>
                                <h4 class="font-bold mb-1">好奇者</h4>
                                <p class="text-sm text-gray-400">探索视觉的奥秘</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 错觉详情页面 -->
            <div id="page-detail" class="page">
                <!-- 将通过JS动态生成 -->
            </div>
        </div>
    </main>

    <!-- 页脚 -->
    <footer class="glass-card mt-12 py-8 relative z-10">
        <div class="max-w-7xl mx-auto px-6 text-center">
            <p class="text-gray-400 text-sm">
                <i class="fas fa-eye mr-2"></i>
                视觉欺骗艺术馆 - 探索人类感知的边界
            </p>
            <p class="text-gray-500 text-xs mt-2">
                通过互动体验学习视觉错觉的科学原理
            </p>
        </div>
    </footer>

    <script>
        // 视觉欺骗数据
        const illusions = [
            {
                id: 'penrose-triangle',
                name: '彭罗斯三角',
                category: ['impossible', 'geometric'],
                discoverer: '罗杰·彭罗斯 (1958)',
                tags: ['不可能图形', '几何错觉'],
                rating: 4,
                principle: '彭罗斯三角是最著名的不可能图形之一。它看起来像一个立体的三角形，但实际上在三维空间中无法构造。这种错觉源于大脑对三维物体的自动解释——我们假设每条边都是连续的，但实际上图形的不同部分使用了不同的深度线索。当我们试图追踪三角形的边缘时，会发现每条边似乎都在"向上"或"向前"，形成了一个不可能的循环。',
                hint: '点击图形可以切换颜色方案和旋转方向，尝试追踪边缘看看会发生什么！',
                mathPrinciple: '彭罗斯三角可以用投影几何来分析。在三维空间中，三角形的三个顶点不能同时满足"每个角都是90°"的条件。但在二维投影中，通过巧妙安排各部分的深度线索，可以创造出看似合理的假象。数学上，这涉及到了非欧几里得几何的概念。',
                physicsPrinciple: '从物理学角度，彭罗斯三角揭示了我们的视觉系统如何处理深度信息。大脑使用多种线索（如遮挡、透视、阴影）来判断物体的三维结构。当这些线索相互矛盾时，就会产生不可能的感知。',
                render: renderPenroseTriangle
            },
            {
                id: 'necker-cube',
                name: '内克尔方块',
                category: ['impossible', 'cognitive'],
                discoverer: '路易斯·内克尔 (1832)',
                tags: ['不可能图形', '认知错觉', '双稳态'],
                rating: 5,
                principle: '内克尔方块是一个简单的线框立方体，但它会产生两种不同的三维解释。大脑无法确定哪个面在前面，哪个面在后面，因此会在两种解释之间自发切换。这种现象被称为"双稳态感知"，展示了大脑如何主动解释模糊的视觉信息。盯着看一会儿，你会发现方块会突然"翻转"方向。',
                hint: '盯着方块中心，等待它自发翻转。点击可以强制切换视角！',
                mathPrinciple: '内克尔方块的双稳态可以用拓扑学来描述。两种解释对应于同一二维投影的两个不同三维配置。数学上，这展示了投影映射的多对一性质：多个三维结构可以投影到同一个二维图像。',
                physicsPrinciple: '从神经物理学角度，内克尔方块的翻转与大脑中神经元群体的竞争活动有关。两群分别代表不同解释的神经元相互抑制，当一群获胜时，另一群被抑制。这种竞争导致感知在两种状态间切换，切换的时间间隔通常为几秒钟。',
                render: renderNeckerCube
            },
            {
                id: 'hermann-grid',
                name: '赫尔曼栅格',
                category: ['geometric'],
                discoverer: '卢迪曼·赫尔曼 (1870)',
                tags: ['几何错觉', '生理错觉'],
                rating: 4,
                principle: '在赫尔曼栅格中，你会看到白色交叉点处出现灰色斑点，但当你直视某个交叉点时，斑点就会消失。这是由于视网膜神经节细胞的侧抑制效应造成的——当周围区域更亮时，神经细胞会抑制相邻细胞的信号，导致我们看到不存在的灰色。这揭示了人类视觉系统的基本工作原理。',
                hint: '移动鼠标悬停在格子上，观察灰色斑点的变化。点击可以改变网格大小！',
                mathPrinciple: '赫尔曼栅格可以用数学模型来描述。设交叉点的亮度为L_center，周围区域的平均亮度为L_surround，则感知亮度B可以近似为：B = L_center - k·L_surround，其中k是抑制系数。这个简单的减法模型可以解释为什么交叉点看起来更暗。',
                physicsPrinciple: '赫尔曼栅格的物理基础在于视网膜神经节细胞的感受野结构。这些细胞有一个中心-周边拮抗的感受野：中心区域兴奋，周边区域抑制（或反之）。在交叉点，周边抑制最强，导致感知亮度降低。这是侧抑制（lateral inhibition）的直接体现。',
                render: renderHermannGrid
            },
            {
                id: 'muller-lyer',
                name: '穆勒-莱耶错觉',
                category: ['geometric'],
                discoverer: '弗朗茨·卡尔·穆勒-莱耶 (1889)',
                tags: ['几何错觉', '长度错觉'],
                rating: 3,
                principle: '两条完全等长的线段，因为两端箭头方向不同，看起来长度却不同。向外的箭头使线条看起来更长，向内的箭头使线条看起来更短。这种错觉可能与我们对三维空间的解释有关——向外箭头类似房屋外角，向内箭头类似房屋内角，大脑会自动"补偿"深度距离。',
                hint: '点击可以显示/隐藏参考线，验证两条线确实等长！',
                mathPrinciple: '穆勒-莱耶错觉的强度可以用角度θ来量化。研究表明，感知长度L_perceived与实际长度L_actual的关系近似为：L_perceived ≈ L_actual · (1 + k·tan(θ/2))，其中k是常数。当θ = 0时（无箭头），错觉消失。',
                physicsPrinciple: '从进化心理学角度，穆勒-莱耶错觉可能与我们对三维空间的解释有关。向外的箭头类似于房屋的外角（凸角），向内的箭头类似于内角（凹角）。在三维世界中，外角通常更近，因此大脑会"补偿"其感知大小。这种解释被称为"深度加工理论"。',
                render: renderMullerLyer
            },
            {
                id: 'rotating-snakes',
                name: '旋转蛇错觉',
                category: ['motion'],
                discoverer: '北冈明佳 (2003)',
                tags: ['运动错觉', '动态'],
                rating: 5,
                principle: '旋转蛇是一种令人惊叹的运动错觉——静止的图像看起来在旋转！这种效果源于眼睛的微小运动（扫视）和不同亮度区域的特殊排列。当视网膜的不同部分接收到不同的亮度信息时，视觉处理的时间差异被解释为运动。颜色和亮度的对比度越高，旋转效果越明显。',
                hint: '盯着中心看，旋转会减慢。移动眼睛，旋转会加速。点击可以改变颜色方案！',
                mathPrinciple: '旋转蛇错觉可以用时间-空间频谱分析来理解。图像的空间频谱与眼睛运动的时间频谱相互作用，产生运动感知。数学上，感知运动方向v与亮度梯度∇I相关：v ∝ ∇I / I，这解释了为什么高对比度区域产生更强的运动感。',
                physicsPrinciple: '旋转蛇错觉的物理机制涉及视觉处理的时间特性。不同亮度的区域刺激视网膜时，视觉系统处理它们的速度不同：亮区域处理更快，暗区域处理更慢。这种时间差（约30-50毫秒）被大脑解释为运动信号。这是微扫视与亮度处理延迟共同作用的结果。',
                render: renderRotatingSnakes
            },
            {
                id: 'kanizsa-triangle',
                name: '卡尼莎三角',
                category: ['cognitive'],
                discoverer: '加埃塔诺·卡尼莎 (1955)',
                tags: ['认知错觉', '主观轮廓'],
                rating: 4,
                principle: '你会看到一个白色三角形叠加在三个圆形之上，但实际上这个三角形并不存在！这是"主观轮廓"或"错觉轮廓"的经典例子。大脑会自动"填补"缺失的信息，根据不完整的线索构建完整的形状。这种能力帮助我们在日常生活中识别被遮挡的物体。',
                hint: '点击可以显示/隐藏辅助线，观察主观轮廓是如何形成的！',
                mathPrinciple: '卡尼莎三角可以用Gestalt心理学的"闭合原则"来解释。大脑倾向于将不完整的图形感知为完整的。数学上，这可以用贝叶斯推断来建模：P(shape|input) ∝ P(input|shape)·P(shape)，其中P(shape)代表对简单、完整形状的先验偏好。',
                physicsPrinciple: '从神经物理学角度，主观轮廓的产生与V2视觉皮层的神经元活动有关。这些神经元对轮廓方向敏感，即使在没有物理轮廓的地方，它们也会被"推断"的轮廓激活。这展示了大脑的"预测编码"能力：主动预测输入，而不仅仅是被动接收。',
                render: renderKanizsaTriangle
            },
            {
                id: 'ebbinghaus',
                name: '艾宾浩斯错觉',
                category: ['geometric'],
                discoverer: '赫尔曼·艾宾浩斯 (1901)',
                tags: ['几何错觉', '大小错觉'],
                rating: 4,
                principle: '两个完全相同大小的圆形，因为周围参照物不同，看起来大小不同。被小圆包围的中心圆看起来更大，被大圆包围的中心圆看起来更小。这种大小对比效应展示了感知的相对性——我们不是孤立地感知物体，而是根据周围环境来判断。',
                hint: '点击可以移除周围的圆形，验证中心圆确实等大！',
                mathPrinciple: '艾宾浩斯错觉可以用情境效应来量化。设目标圆的实际半径为r，周围圆的平均半径为r_context，则感知半径r_perceived近似为：r_perceived ≈ r · f(r/r_context)，其中f是单调递减函数。当r_context < r时，目标看起来更大；反之则更小。',
                physicsPrinciple: '艾宾浩斯错觉的神经基础在于视觉皮层的情境调制。V4皮层的神经元对目标刺激的反应会被周围刺激调制。这种"情境效应"可能是为了增强视觉系统的对比敏感度——在自然环境中，判断物体相对大小比绝对大小更有意义。',
                render: renderEbbinghaus
            },
            {
                id: 'cafe-wall',
                name: '咖啡墙错觉',
                category: ['geometric'],
                discoverer: '理查德·格雷戈里 (1973)',
                tags: ['几何错觉', '平行线'],
                rating: 4,
                principle: '所有水平线都是完全平行的，但看起来却是倾斜的！这种错觉在布里斯托尔的一家咖啡馆墙壁上被发现。灰色"砂浆"线在黑白瓷砖之间产生了模糊的边界，大脑无法确定边缘的确切位置，导致线条看起来扭曲。这种效果展示了视觉系统如何处理模糊信息。',
                hint: '点击可以高亮某一行，验证线条确实是平行的！',
                mathPrinciple: '咖啡墙错觉可以用空间频率分析来理解。黑白瓷砖的周期性模式与砂浆线的空间频率相互作用，产生莫尔效应。数学上，两个周期性图案的叠加会产生新的周期性成分，这些成分被视觉系统解释为倾斜。',
                physicsPrinciple: '咖啡墙错觉的物理机制涉及边缘检测的不确定性。黑白瓷砖之间的边界产生高对比度，而灰色砂浆产生低对比度。视觉系统在处理这些不同对比度的边缘时，会产生位置不确定性，导致感知的线条扭曲。这与神经元的对比敏感度函数有关。',
                render: renderCafeWall
            },
            {
                id: 'penrose-stairs',
                name: '彭罗斯阶梯',
                category: ['impossible'],
                discoverer: '罗杰·彭罗斯 (1958)',
                tags: ['不可能图形', '循环'],
                rating: 5,
                principle: '彭罗斯阶梯是一种不可能图形，看起来像是一个不断上升（或下降）却永远循环的楼梯。每个台阶似乎都比前一个高，但走一圈后又回到了起点。这种错觉利用了局部与全局的矛盾——每个局部都是合理的，但整体却不可能。埃舍尔的名作《上升与下降》就是基于这个原理。',
                hint: '点击可以改变阶梯的旋转方向，尝试追踪一条路径！',
                mathPrinciple: '彭罗斯阶梯可以用拓扑学来分析。在欧几里得空间中，一个严格单调上升的路径不可能回到起点。但在某些非欧几何（如螺旋面）中，这种结构可以存在。彭罗斯阶梯正是利用了二维投影中深度信息的丢失，创造了看似合理的假象。',
                physicsPrinciple: '彭罗斯阶梯展示了视觉系统的"局部优先"处理策略。大脑首先分析图像的局部特征（每个台阶都是正常的），然后尝试将它们整合成全局一致的三维结构。当局部信息无法整合时，我们仍然接受这个矛盾的解释，因为局部信息足够可信。',
                render: renderPenroseStairs
            },
            {
                id: 'cube-3d',
                name: '不可能立方体',
                category: ['impossible'],
                discoverer: 'M.C.埃舍尔',
                tags: ['不可能图形', '3D'],
                rating: 5,
                principle: '不可能立方体看起来是一个正常的立方体，但仔细观察会发现它的边缘连接方式在三维空间中是不可能的。某些边似乎同时位于前面和后面，创造了一个自相矛盾的结构。这种图形挑战了我们对三维空间的直觉理解。',
                hint: '点击可以改变立方体的旋转速度和方向！',
                mathPrinciple: '不可能立方体可以用图论来分析。立方体的边可以表示为图，正常立方体的图是平面图，而不可能立方体的图包含交叉边。在三维空间中，这些交叉边不可能同时满足所有连接关系。',
                physicsPrinciple: '不可能立方体揭示了深度线索的冲突。大脑使用多种线索（遮挡、透视、阴影）来判断深度。当这些线索相互矛盾时，大脑无法形成一致的三维解释，但仍然接受这个矛盾的结构，因为每个局部线索都是可信的。',
                render: renderCube3D
            },
            {
                id: 'delboeuf',
                name: '德尔伯夫错觉',
                category: ['geometric'],
                discoverer: '约瑟夫·德尔伯夫 (1892)',
                tags: ['几何错觉', '大小错觉'],
                rating: 3,
                principle: '两个相同大小的圆，一个被小圆环包围，一个被大圆环包围，看起来大小不同。被小圆环包围的圆看起来更大。这与艾宾浩斯错觉相关，但强调了参照物形状的影响。这种错觉在日常生活中很常见，比如餐盘的大小会影响我们对食物份量的判断。',
                hint: '点击可以移除外圈，验证两个圆确实等大！',
                mathPrinciple: '德尔伯夫错觉可以用同化-对比理论来解释。当外圈与内圈大小相近时，内圈会被"同化"到外圈，看起来更大；当外圈远大于内圈时，产生对比效应，内圈看起来更小。数学上，感知大小r_perceived ≈ r_actual + k·(R_ring - r_actual)，其中R_ring是外圈半径。',
                physicsPrinciple: '德尔伯夫错觉的神经机制与艾宾浩斯错觉类似，涉及视觉皮层的情境调制。不同之处在于，圆环提供了更明确的边界，增强了同化效应。这种错觉在现实生活中有重要应用，如餐具设计、食物份量感知等。',
                render: renderDelboeuf
            },
            {
                id: 'zollner',
                name: '佐尔纳错觉',
                category: ['geometric'],
                discoverer: '约翰·卡尔·弗里德里希·佐尔纳 (1860)',
                tags: ['几何错觉', '平行线'],
                rating: 4,
                principle: '佐尔纳错觉中，所有长竖线都是平行的，但短斜线使它们看起来不平行。不同方向的短斜线创造了深度线索，大脑将这些二维图案解释为三维结构，导致平行线看起来会聚或发散。这展示了大脑如何利用辅助信息来解释主要图形。',
                hint: '点击可以隐藏短斜线，验证长线确实平行！',
                mathPrinciple: '佐尔纳错觉可以用角度偏差来量化。设短斜线与长线的夹角为θ，则感知的平行线偏差角α近似为：α ≈ k·sin(2θ)，其中k是常数。当θ = 0°或90°时（短斜线与长线平行或垂直），错觉消失。',
                physicsPrinciple: '佐尔纳错觉的物理机制与大脑对三维结构的解释有关。短斜线创造了类似透视缩短的深度线索，大脑将这些线索解释为三维空间中的倾斜。这种解释影响了我们对主要线条方向的感知，导致平行线看起来不平行。',
                render: renderZollner
            },
            {
                id: 'poggendorff',
                name: '波根多夫错觉',
                category: ['geometric'],
                discoverer: '约翰·波根多夫 (1860)',
                tags: ['几何错觉', '对齐'],
                rating: 4,
                principle: '一条斜线被一个矩形遮挡后，我们很难正确判断两段线的连接位置。大脑倾向于将线段向更"自然"的方向延伸，而不是真实的几何位置。这种错觉展示了视觉系统如何处理遮挡信息，以及我们如何"猜测"被遮挡物体的位置。',
                hint: '点击可以移除遮挡物，验证线段的真实连接！',
                mathPrinciple: '波根多夫错觉可以用几何光学来分析。设斜线与垂直方向的夹角为θ，遮挡物的宽度为w，则感知的连接点偏移d近似为：d ≈ w·tan(θ)·k，其中k是小于1的常数。偏移方向通常指向斜线的"钝角"侧。',
                physicsPrinciple: '波根多夫错觉的神经机制涉及视觉皮层的"填充"过程。当物体被遮挡时，大脑会尝试"填补"被遮挡的部分。这种填补不是简单的线性外推，而是受到多种因素影响，包括斜线的角度、遮挡物的宽度等。',
                render: renderPoggendorff
            },
            {
                id: 'mobius',
                name: '莫比乌斯环',
                category: ['impossible'],
                discoverer: '奥古斯特·费迪南德·莫比乌斯 (1858)',
                tags: ['不可能图形', '拓扑学'],
                rating: 5,
                principle: '莫比乌斯环是一个真实存在的数学奇迹——只有一个面和一条边的曲面。如果你沿着环的中心画线，最终会回到起点，但画在"另一面"上。这种性质挑战了我们对"里面"和"外面"的直觉理解，在数学、艺术和哲学中都有深远影响。',
                hint: '点击可以改变环的颜色和旋转方式！',
                mathPrinciple: '莫比乌斯环是拓扑学中的经典对象。它是一个不可定向曲面，欧拉示性数为0。数学上，莫比乌斯环可以表示为参数方程：x(u,v) = (1 + v/2·cos(u/2))·cos(u)，y(u,v) = (1 + v/2·cos(u/2))·sin(u)，z(u,v) = v/2·sin(u/2)，其中u ∈ [0, 2π]，v ∈ [-1, 1]。',
                physicsPrinciple: '莫比乌斯环在物理学中有重要应用。在分子化学中，某些分子具有莫比乌斯拓扑结构。在电磁学中，莫比乌斯形状的电阻具有特殊的电感特性。这些应用展示了数学概念与物理世界的深刻联系。',
                render: renderMobius
            },
            {
                id: 'sargent',
                name: '萨金特错觉',
                category: ['geometric'],
                discoverer: '卡尔·萨金特',
                tags: ['几何错觉', '长度错觉'],
                rating: 3,
                principle: '萨金特错觉展示了背景如何影响我们对形状的感知。相同的形状在不同的背景条纹下看起来会变形。这种效果源于视觉系统对背景模式的解释，大脑试图将形状与背景的纹理"对齐"，导致感知的扭曲。',
                hint: '点击可以改变背景条纹的方向！',
                mathPrinciple: '萨金特错觉可以用空间频率分析来理解。背景条纹的空间频率与目标形状的边缘相互作用，产生调制效应。数学上，这可以用卷积来描述：感知形状 = 实际形状 ⊗ 背景模式，其中⊗表示空间卷积。',
                physicsPrinciple: '萨金特错觉的神经机制与视觉皮层的方向选择性有关。V1皮层的神经元对特定方向的条纹敏感，当背景条纹与目标形状的方向不同时，会产生干扰效应，导致形状感知的扭曲。',
                render: renderSargent
            }
        ];

        // 当前状态
        let currentIllusionIndex = 0;
        let exploredIllusions = new Set();
        let clickCount = 0;

        // 初始化
        document.addEventListener('DOMContentLoaded', () => {
            initializeApp();
        });

        function initializeApp() {
            renderGallery();
            updateExploredCount();
            document.getElementById('total-count').textContent = illusions.length;
            setupEventListeners();
        }

        // 显示页面
        function showPage(pageName) {
            // 更新导航状态
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
                if (link.dataset.page === pageName) {
                    link.classList.add('active');
                }
            });
            
            // 切换页面
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(`page-${pageName}`).classList.add('active');
            
            // 滚动到顶部
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // 切换移动端菜单
        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('hidden');
        }

        // 渲染图库
        function renderGallery() {
            const container = document.getElementById('gallery-grid');
            container.innerHTML = illusions.map((illusion, index) => `
                <div class="glass-card rounded-3xl p-6 illusion-card cursor-pointer" data-index="${index}" data-category="${illusion.category.join(' ')}">
                    <div class="h-48 flex items-center justify-center mb-4">
                        <div class="mini-preview" data-id="${illusion.id}"></div>
                    </div>
                    <h3 class="font-display text-xl font-bold mb-2">${illusion.name}</h3>
                    <p class="text-gray-400 text-sm mb-4 line-clamp-2">${illusion.principle.substring(0, 80)}...</p>
                    <div class="flex items-center justify-between">
                        <div class="flex gap-1">
                            ${Array(5).fill(0).map((_, i) => 
                                `<i class="fas fa-star text-sm ${i < illusion.rating ? 'text-neon-yellow' : 'text-gray-600'}"></i>`
                            ).join('')}
                        </div>
                        <span class="text-neon-cyan text-sm">探索 <i class="fas fa-arrow-right ml-1"></i></span>
                    </div>
                </div>
            `).join('');
            
            // 渲染迷你预览
            document.querySelectorAll('.mini-preview').forEach(preview => {
                renderMiniPreview(preview);
            });
        }

        // 渲染迷你预览
        function renderMiniPreview(element) {
            const id = element.dataset.id;
            const miniStyles = {
                'penrose-triangle': 'width: 80px; height: 80px; border: 3px solid #00f5d4; border-radius: 0; clip-path: polygon(50% 0%, 0% 100%, 100% 100%);',
                'necker-cube': 'width: 70px; height: 70px; border: 2px solid #00f5d4; transform: rotate(45deg);',
                'hermann-grid': 'display: grid; grid-template-columns: repeat(4, 1fr); gap: 4px; width: 70px; height: 70px;',
                'muller-lyer': 'width: 80px; height: 4px; background: #fff; position: relative;',
                'rotating-snakes': 'width: 80px; height: 80px; border-radius: 50%; background: conic-gradient(from 0deg, #000, #8338ec, #fff, #ff006e, #000); animation: snakeRotate 20s linear infinite;',
                'kanizsa-triangle': 'width: 0; height: 0; border-left: 40px solid transparent; border-right: 40px solid transparent; border-bottom: 70px solid rgba(255,255,255,0.3);',
                'ebbinghaus': 'width: 40px; height: 40px; border-radius: 50%; background: #00f5d4; box-shadow: 0 0 0 12px rgba(255,0,110,0.3);',
                'cafe-wall': 'display: grid; grid-template-columns: repeat(5, 1fr); gap: 2px; width: 70px; height: 56px;',
                'penrose-stairs': 'width: 70px; height: 70px; background: linear-gradient(135deg, #00f5d4 25%, transparent 25%); background-size: 14px 14px;',
                'cube-3d': 'width: 60px; height: 60px; border: 2px solid #00f5d4; transform: rotateX(45deg) rotateY(45deg);',
                'delboeuf': 'width: 35px; height: 35px; border-radius: 50%; background: #00f5d4; border: 4px solid #ff006e;',
                'zollner': 'width: 70px; height: 70px; background: repeating-linear-gradient(45deg, transparent, transparent 7px, #00f5d4 7px, #00f5d4 10px);',
                'poggendorff': 'width: 60px; height: 4px; background: #00f5d4; transform: rotate(-20deg);',
                'mobius': 'width: 80px; height: 30px; border: 4px solid #8338ec; border-radius: 50%;',
                'sargent': 'width: 70px; height: 50px; background: repeating-linear-gradient(90deg, #1a1a2e, #1a1a2e 7px, #3a3a4e 7px, #3a3a4e 14px);'
            };
            
            element.style.cssText = miniStyles[id] || 'width: 60px; height: 60px; background: linear-gradient(135deg, #00f5d4, #8338ec); border-radius: 12px;';
            
            // 为某些错觉添加额外元素
            if (id === 'hermann-grid') {
                for (let i = 0; i < 16; i++) {
                    const cell = document.createElement('div');
                    cell.style.cssText = 'width: 14px; height: 14px; background: #fff;';
                    element.appendChild(cell);
                }
            } else if (id === 'cafe-wall') {
                for (let i = 0; i < 10; i++) {
                    const tile = document.createElement('div');
                    tile.style.cssText = `width: 12px; height: 10px; background: ${i % 2 === 0 ? '#1a1a2e' : '#e0e0e0'};`;
                    element.appendChild(tile);
                }
            }
        }

        // 显示错觉详情
        function showIllusionDetail(index) {
            currentIllusionIndex = index;
            const illusion = illusions[index];
            
            // 标记为已探索
            exploredIllusions.add(index);
            updateExploredCount();
            
            // 生成详情页面内容
            const detailPage = document.getElementById('page-detail');
            detailPage.innerHTML = `
                <div class="mb-6">
                    <button onclick="showPage('gallery')" class="text-gray-400 hover:text-white transition-colors">
                        <i class="fas fa-arrow-left mr-2"></i>返回图库
                    </button>
                </div>
                
                <div class="grid lg:grid-cols-2 gap-8">
                    <!-- 图形展示区 -->
                    <div class="glass-card rounded-3xl p-8 flex flex-col items-center justify-center min-h-[400px] relative overflow-hidden">
                        <div class="absolute inset-0 bg-gradient-to-br from-neon-cyan/5 to-neon-purple/5"></div>
                        <div id="illusion-container" class="perspective-container relative z-10 flex items-center justify-center">
                            <!-- 动态内容将在这里渲染 -->
                        </div>
                        <h2 class="font-display text-2xl font-bold mt-6 text-center relative z-10">${illusion.name}</h2>
                    </div>
                    
                    <!-- 信息面板 -->
                    <div class="space-y-6">
                        <!-- 基本信息卡片 -->
                        <div class="info-card">
                            <div class="flex items-center gap-3 mb-4">
                                <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-neon-cyan/20 to-neon-purple/20 flex items-center justify-center">
                                    <i class="fas fa-info-circle text-neon-cyan"></i>
                                </div>
                                <h3 class="font-display font-bold text-lg">基本信息</h3>
                            </div>
                            <div class="space-y-3">
                                <div class="flex items-start gap-3">
                                    <span class="text-gray-500 w-24 shrink-0">发现者</span>
                                    <span class="text-gray-300">${illusion.discoverer}</span>
                                </div>
                                <div class="flex items-start gap-3">
                                    <span class="text-gray-500 w-24 shrink-0">类型</span>
                                    <div class="flex flex-wrap">
                                        ${illusion.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                                    </div>
                                </div>
                                <div class="flex items-start gap-3">
                                    <span class="text-gray-500 w-24 shrink-0">趣味度</span>
                                    <div class="flex gap-1">
                                        ${Array(5).fill(0).map((_, i) => 
                                            `<i class="fas fa-star ${i < illusion.rating ? 'text-neon-yellow' : 'text-gray-600'}"></i>`
                                        ).join('')}
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 原理说明 -->
                        <div class="info-card">
                            <div class="flex items-center gap-3 mb-4">
                                <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-neon-pink/20 to-neon-yellow/20 flex items-center justify-center">
                                    <i class="fas fa-lightbulb text-neon-pink"></i>
                                </div>
                                <h3 class="font-display font-bold text-lg">原理解析</h3>
                            </div>
                            <p class="text-gray-300 leading-relaxed">${illusion.principle}</p>
                        </div>
                        
                        <!-- 数学原理 -->
                        <div class="info-card">
                            <div class="flex items-center gap-3 mb-4">
                                <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-neon-purple/20 to-neon-cyan/20 flex items-center justify-center">
                                    <i class="fas fa-calculator text-neon-purple"></i>
                                </div>
                                <h3 class="font-display font-bold text-lg">数学原理</h3>
                            </div>
                            <p class="text-gray-300 leading-relaxed">${illusion.mathPrinciple}</p>
                        </div>
                        
                        <!-- 物理学解释 -->
                        <div class="info-card">
                            <div class="flex items-center gap-3 mb-4">
                                <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-neon-cyan/20 to-neon-pink/20 flex items-center justify-center">
                                    <i class="fas fa-atom text-neon-cyan"></i>
                                </div>
                                <h3 class="font-display font-bold text-lg">物理学解释</h3>
                            </div>
                            <p class="text-gray-300 leading-relaxed">${illusion.physicsPrinciple}</p>
                        </div>
                        
                        <!-- 互动提示 -->
                        <div class="info-card bg-gradient-to-r from-neon-cyan/10 to-neon-purple/10">
                            <div class="flex items-center gap-3 mb-3">
                                <i class="fas fa-magic text-neon-cyan"></i>
                                <h3 class="font-display font-bold">互动提示</h3>
                            </div>
                            <p class="text-gray-300 text-sm">${illusion.hint}</p>
                        </div>
                    </div>
                </div>
                
                <!-- 相关错觉推荐 -->
                <div class="mt-12">
                    <h3 class="font-display text-xl font-bold mb-6">
                        <i class="fas fa-layer-group mr-2 text-neon-cyan"></i>
                        相关错觉推荐
                    </h3>
                    <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-4">
                        ${getRelatedIllusions(index).map((relIllusion, relIndex) => `
                            <div class="glass-card rounded-2xl p-4 cursor-pointer hover:border-neon-cyan/50 transition-all" onclick="showIllusionDetail(${relIllusion.index})">
                                <div class="h-24 flex items-center justify-center mb-3">
                                    <div class="mini-preview" data-id="${relIllusion.id}"></div>
                                </div>
                                <h4 class="font-display text-sm font-bold text-center">${relIllusion.name}</h4>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            
            // 渲染迷你预览
            detailPage.querySelectorAll('.mini-preview').forEach(preview => {
                renderMiniPreview(preview);
            });
            
            // 渲染错觉图形
            illusion.render();
            
            // 显示详情页面
            showPage('detail');
        }

        // 获取相关错觉
        function getRelatedIllusions(currentIndex) {
            const currentIllusion = illusions[currentIndex];
            const related = [];
            
            // 找到有相同分类的错觉
            illusions.forEach((illusion, index) => {
                if (index !== currentIndex) {
                    const hasCommonCategory = illusion.category.some(cat => 
                        currentIllusion.category.includes(cat)
                    );
                    if (hasCommonCategory) {
                        related.push({ ...illusion, index });
                    }
                }
            });
            
            // 如果相关错觉不足4个，添加其他错觉
            if (related.length < 4) {
                illusions.forEach((illusion, index) => {
                    if (index !== currentIndex && !related.find(r => r.index === index)) {
                        related.push({ ...illusion, index });
                    }
                    if (related.length >= 4) return;
                });
            }
            
            return related.slice(0, 4);
        }

        // 更新已探索计数
        function updateExploredCount() {
            document.getElementById('explored-count').textContent = exploredIllusions.size;
        }

        // 设置事件监听
        function setupEventListeners() {
            // 图库卡片点击
            document.getElementById('gallery-grid').addEventListener('click', (e) => {
                const card = e.target.closest('.illusion-card');
                if (card) {
                    const index = parseInt(card.dataset.index);
                    showIllusionDetail(index);
                    createParticles(e.clientX, e.clientY);
                }
            });

            // 分类按钮点击
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const category = btn.dataset.category;
                    filterGallery(category);
                    
                    document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    
                    createParticles(e.clientX, e.clientY);
                });
            });

            // 学习模块导航
            document.querySelectorAll('.learn-nav-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const module = btn.dataset.module;
                    showLearnModule(module);
                    
                    document.querySelectorAll('.learn-nav-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                });
            });
        }

        // 过滤图库
        function filterGallery(category) {
            const cards = document.querySelectorAll('.illusion-card');
            
            cards.forEach(card => {
                const categories = card.dataset.category.split(' ');
                const shouldShow = category === 'all' || categories.includes(category);
                card.style.display = shouldShow ? '' : 'none';
            });
        }

        // 显示学习模块
        function showLearnModule(moduleName) {
            document.querySelectorAll('.learn-module').forEach(module => {
                module.classList.add('hidden');
            });
            document.getElementById(`module-${moduleName}`).classList.remove('hidden');
        }

        // 创建粒子效果
        function createParticles(x, y) {
            for (let i = 0; i < 12; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = x + 'px';
                particle.style.top = y + 'px';
                
                const angle = (Math.PI * 2 / 12) * i;
                const velocity = 50 + Math.random() * 50;
                const dx = Math.cos(angle) * velocity;
                const dy = Math.sin(angle) * velocity;
                
                particle.style.transform = `translate(${dx}px, ${dy}px)`;
                document.body.appendChild(particle);
                
                setTimeout(() => particle.remove(), 1000);
            }
        }

        // ========== 渲染函数 ==========

        function renderPenroseTriangle() {
            const container = document.getElementById('illusion-container');
            container.innerHTML = `
                <div class="penrose-triangle" id="main-illusion">
                    <svg viewBox="0 0 200 200" class="penrose-svg">
                        <defs>
                            <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#00f5d4"/>
                                <stop offset="100%" style="stop-color:#00b4a0"/>
                            </linearGradient>
                            <linearGradient id="grad2" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#ff006e"/>
                                <stop offset="100%" style="stop-color:#c0005a"/>
                            </linearGradient>
                            <linearGradient id="grad3" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#8338ec"/>
                                <stop offset="100%" style="stop-color:#6020c0"/>
                            </linearGradient>
                        </defs>
                        <polygon points="30,170 30,100 100,100 100,130 60,130 60,170" fill="url(#grad1)"/>
                        <polygon points="170,170 170,100 100,100 100,130 140,130 140,170" fill="url(#grad2)"/>
                        <polygon points="100,30 100,100 130,100 130,60 170,60 170,30" fill="url(#grad3)"/>
                        <polygon points="60,130 100,130 100,100 60,100" fill="#00d4b8"/>
                        <polygon points="100,130 140,130 140,100 100,100" fill="#e00060"/>
                        <polygon points="100,60 130,60 130,100 100,100" fill="#7028d8"/>
                    </svg>
                </div>
            `;
            
            const svg = container.querySelector('svg');
            svg.style.animation = 'float 6s ease-in-out infinite';
            
            container.onclick = () => {
                const colors = [
                    ['#00f5d4', '#ff006e', '#8338ec'],
                    ['#ffbe0b', '#00f5d4', '#ff006e'],
                    ['#8338ec', '#ffbe0b', '#00f5d4'],
                    ['#ff006e', '#8338ec', '#ffbe0b']
                ];
                const colorIndex = clickCount % colors.length;
                const [c1, c2, c3] = colors[colorIndex];
                
                container.querySelectorAll('linearGradient stop:first-child').forEach((stop, i) => {
                    stop.style.stopColor = [c1, c2, c3][i];
                });
                clickCount++;
            };
        }

        function renderNeckerCube() {
            const container = document.getElementById('illusion-container');
            container.innerHTML = `
                <div class="necker-cube" id="main-illusion">
                    <div class="face front"></div>
                    <div class="face back"></div>
                    <div class="connectors">
                        <span></span>
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </div>
            `;
            
            let flipped = false;
            container.onclick = () => {
                flipped = !flipped;
                const cube = container.querySelector('.necker-cube');
                cube.style.transform = flipped ? 'rotateX(180deg)' : 'rotateX(0deg)';
                cube.style.animation = 'none';
                clickCount++;
            };
        }

        function renderHermannGrid() {
            const container = document.getElementById('illusion-container');
            const gridSize = 8;
            let cellSize = 40;
            
            function createGrid(size) {
                let html = `<div class="hermann-grid" style="grid-template-columns: repeat(${gridSize}, ${size}px);">`;
                for (let i = 0; i < gridSize * gridSize; i++) {
                    html += `<div class="cell" style="width: ${size}px; height: ${size}px;"></div>`;
                }
                html += '</div>';
                return html;
            }
            
            container.innerHTML = createGrid(cellSize);
            
            container.onclick = () => {
                cellSize = cellSize === 40 ? 30 : cellSize === 30 ? 50 : 40;
                container.innerHTML = createGrid(cellSize);
                clickCount++;
            };
        }

        function renderMullerLyer() {
            const container = document.getElementById('illusion-container');
            let showGuide = false;
            
            function render() {
                container.innerHTML = `
                    <div class="muller-lyer">
                        <div class="line-group">
                            <div class="arrow outward-left"></div>
                            <div class="line" style="position: relative;">
                                ${showGuide ? '<div style="position: absolute; top: -20px; left: 0; font-size: 12px; color: #00f5d4;">200px</div>' : ''}
                            </div>
                            <div class="arrow outward-right"></div>
                        </div>
                        <div class="line-group">
                            <div class="arrow inward-left"></div>
                            <div class="line" style="position: relative;">
                                ${showGuide ? '<div style="position: absolute; top: -20px; left: 0; font-size: 12px; color: #ff006e;">200px</div>' : ''}
                            </div>
                            <div class="arrow inward-right"></div>
                        </div>
                        ${showGuide ? '<div style="text-align: center; color: #888; font-size: 14px; margin-top: 20px;">两条线段长度完全相同！</div>' : ''}
                    </div>
                `;
            }
            
            render();
            container.onclick = () => {
                showGuide = !showGuide;
                render();
                clickCount++;
            };
        }

        function renderRotatingSnakes() {
            const container = document.getElementById('illusion-container');
            const colorSchemes = [
                ['#000', '#8338ec', '#fff', '#ff006e'],
                ['#000', '#00f5d4', '#fff', '#ffbe0b'],
                ['#000', '#ff006e', '#fff', '#00f5d4'],
                ['#000', '#ffbe0b', '#fff', '#8338ec']
            ];
            
            function render(schemeIndex) {
                const [c1, c2, c3, c4] = colorSchemes[schemeIndex];
                container.innerHTML = `
                    <div class="rotating-snakes" id="main-illusion">
                        <div class="snake-ring" style="background: conic-gradient(from 0deg, ${c1} 0deg 30deg, ${c2} 30deg 60deg, ${c3} 60deg 90deg, ${c4} 90deg 120deg, ${c1} 120deg 150deg, ${c2} 150deg 180deg, ${c3} 180deg 210deg, ${c4} 210deg 240deg, ${c1} 240deg 270deg, ${c2} 270deg 300deg, ${c3} 300deg 330deg, ${c4} 330deg 360deg);"></div>
                        <div class="snake-ring" style="background: conic-gradient(from 45deg, ${c3} 0deg 30deg, ${c2} 30deg 60deg, ${c1} 60deg 90deg, ${c4} 90deg 120deg, ${c3} 120deg 150deg, ${c2} 150deg 180deg, ${c1} 180deg 210deg, ${c4} 210deg 240deg, ${c3} 240deg 270deg, ${c2} 270deg 300deg, ${c1} 300deg 330deg, ${c4} 330deg 360deg);"></div>
                        <div class="snake-ring" style="background: conic-gradient(from 90deg, ${c1} 0deg 30deg, ${c4} 30deg 60deg, ${c3} 60deg 90deg, ${c2} 90deg 120deg, ${c1} 120deg 150deg, ${c4} 150deg 180deg, ${c3} 180deg 210deg, ${c2} 210deg 240deg, ${c1} 240deg 270deg, ${c4} 270deg 300deg, ${c3} 300deg 330deg, ${c2} 330deg 360deg);"></div>
                        <div class="snake-ring"></div>
                    </div>
                `;
            }
            
            render(0);
            container.onclick = () => {
                render(clickCount % colorSchemes.length);
                clickCount++;
            };
        }

        function renderKanizsaTriangle() {
            const container = document.getElementById('illusion-container');
            let showOutline = false;
            
            function render() {
                container.innerHTML = `
                    <div class="kanizsa-triangle" id="main-illusion">
                        <div class="pacman"></div>
                        <div class="pacman"></div>
                        <div class="pacman"></div>
                        ${showOutline ? '<div class="center-triangle" style="border-bottom-color: rgba(0, 245, 212, 0.3); box-shadow: 0 0 20px rgba(0, 245, 212, 0.3);"></div>' : '<div class="center-triangle"></div>'}
                        ${showOutline ? '<svg viewBox="0 0 280 280" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"><polygon points="140,40 40,220 240,220" fill="none" stroke="#00f5d4" stroke-width="2" stroke-dasharray="5,5"/></svg>' : ''}
                    </div>
                `;
            }
            
            render();
            container.onclick = () => {
                showOutline = !showOutline;
                render();
                clickCount++;
            };
        }

        function renderEbbinghaus() {
            const container = document.getElementById('illusion-container');
            let showAlone = false;
            
            function render() {
                if (showAlone) {
                    container.innerHTML = `
                        <div style="display: flex; justify-content: space-around; align-items: center; width: 300px;">
                            <div style="width: 50px; height: 50px; border-radius: 50%; background: #00f5d4;"></div>
                            <div style="width: 50px; height: 50px; border-radius: 50%; background: #00f5d4;"></div>
                        </div>
                        <div style="text-align: center; color: #888; font-size: 14px; margin-top: 20px;">两个圆大小完全相同！</div>
                    `;
                } else {
                    container.innerHTML = `
                        <div class="ebbinghaus" id="main-illusion">
                            <div class="group left">
                                <div class="center-circle"></div>
                                <div class="surround"></div>
                                <div class="surround"></div>
                                <div class="surround"></div>
                                <div class="surround"></div>
                                <div class="surround"></div>
                                <div class="surround"></div>
                                <div class="surround"></div>
                                <div class="surround"></div>
                            </div>
                            <div class="group right">
                                <div class="center-circle"></div>
                                <div class="surround"></div>
                                <div class="surround"></div>
                                <div class="surround"></div>
                                <div class="surround"></div>
                            </div>
                        </div>
                    `;
                }
            }
            
            render();
            container.onclick = () => {
                showAlone = !showAlone;
                render();
                clickCount++;
            };
        }

        function renderCafeWall() {
            const container = document.getElementById('illusion-container');
            const rows = 8;
            const cols = 6;
            let highlightedRow = -1;
            
            function render() {
                let html = '<div class="cafe-wall">';
                for (let r = 0; r < rows; r++) {
                    html += `<div class="row" style="${highlightedRow === r ? 'background: rgba(0, 245, 212, 0.2);' : ''}">`;
                    for (let c = 0; c < cols; c++) {
                        const isBlack = (r + c) % 2 === 0;
                        html += `<div class="tile ${isBlack ? 'black' : 'white'}"></div>`;
                    }
                    html += '</div>';
                }
                html += '</div>';
                if (highlightedRow >= 0) {
                    html += '<div style="text-align: center; color: #888; font-size: 14px; margin-top: 10px;">注意：所有行都是平行的！</div>';
                }
                container.innerHTML = html;
            }
            
            render();
            container.onclick = () => {
                highlightedRow = (highlightedRow + 1) % (rows + 1);
                if (highlightedRow === rows) highlightedRow = -1;
                render();
                clickCount++;
            };
        }

        function renderPenroseStairs() {
            const container = document.getElementById('illusion-container');
            let rotation = 0;
            
            function render() {
                container.innerHTML = `
                    <div class="penrose-stairs" id="main-illusion" style="transform: rotate(${rotation}deg);">
                        <div class="step"></div>
                        <div class="step"></div>
                        <div class="step"></div>
                        <div class="step"></div>
                        <div class="step"></div>
                        <div class="step"></div>
                        <div class="step"></div>
                        <div class="step"></div>
                    </div>
                `;
            }
            
            render();
            container.onclick = () => {
                rotation = (rotation + 45) % 360;
                render();
                clickCount++;
            };
        }

        function renderCube3D() {
            const container = document.getElementById('illusion-container');
            const speeds = [8, 4, 2, 16];
            let speedIndex = 0;
            
            function render() {
                container.innerHTML = `
                    <div class="cube-3d" id="main-illusion" style="animation-duration: ${speeds[speedIndex]}s;">
                        <div class="face front">前</div>
                        <div class="face back">后</div>
                        <div class="face right">右</div>
                        <div class="face left">左</div>
                        <div class="face top">上</div>
                        <div class="face bottom">下</div>
                    </div>
                `;
            }
            
            render();
            container.onclick = () => {
                speedIndex = (speedIndex + 1) % speeds.length;
                render();
                clickCount++;
            };
        }

        function renderDelboeuf() {
            const container = document.getElementById('illusion-container');
            let showAlone = false;
            
            function render() {
                if (showAlone) {
                    container.innerHTML = `
                        <div style="display: flex; justify-content: space-around; align-items: center; width: 300px;">
                            <div style="width: 50px; height: 50px; border-radius: 50%; background: #00f5d4;"></div>
                            <div style="width: 50px; height: 50px; border-radius: 50%; background: #00f5d4;"></div>
                        </div>
                        <div style="text-align: center; color: #888; font-size: 14px; margin-top: 20px;">两个圆大小完全相同！</div>
                    `;
                } else {
                    container.innerHTML = `
                        <div class="delboeuf" id="main-illusion">
                            <div class="ring small">
                                <div class="dot"></div>
                            </div>
                            <div class="ring large">
                                <div class="dot"></div>
                            </div>
                        </div>
                    `;
                }
            }
            
            render();
            container.onclick = () => {
                showAlone = !showAlone;
                render();
                clickCount++;
            };
        }

        function renderZollner() {
            const container = document.getElementById('illusion-container');
            let showTicks = true;
            
            function render() {
                let html = '<div class="zollner" id="main-illusion">';
                for (let i = 0; i < 5; i++) {
                    const angle = i % 2 === 0 ? -15 : 15;
                    html += `<div class="line-group" style="transform: rotate(${angle}deg);">`;
                    html += '<div class="main-line">';
                    if (showTicks) {
                        for (let j = 0; j < 8; j++) {
                            const tickAngle = i % 2 === 0 ? 30 : -30;
                            html += `<div class="tick" style="top: ${j * 25}px; transform: rotate(${tickAngle}deg);"></div>`;
                        }
                    }
                    html += '</div></div>';
                }
                html += '</div>';
                if (!showTicks) {
                    html += '<div style="text-align: center; color: #888; font-size: 14px; margin-top: 10px;">所有竖线都是平行的！</div>';
                }
                container.innerHTML = html;
            }
            
            render();
            container.onclick = () => {
                showTicks = !showTicks;
                render();
                clickCount++;
            };
        }

        function renderPoggendorff() {
            const container = document.getElementById('illusion-container');
            let showBlock = true;
            
            function render() {
                container.innerHTML = `
                    <div class="poggendorff" id="main-illusion">
                        <div class="oblique left"></div>
                        <div class="oblique right"></div>
                        ${showBlock ? '<div class="block"></div>' : ''}
                        ${!showBlock ? '<div class="continuation c1"></div><div class="continuation c2"></div>' : ''}
                    </div>
                    ${!showBlock ? '<div style="text-align: center; color: #888; font-size: 14px; margin-top: 10px;">注意两段线的真实连接位置！</div>' : ''}
                `;
            }
            
            render();
            container.onclick = () => {
                showBlock = !showBlock;
                render();
                clickCount++;
            };
        }

        function renderMobius() {
            const container = document.getElementById('illusion-container');
            const colorSets = [
                ['#00f5d4', '#8338ec', '#ff006e'],
                ['#ffbe0b', '#00f5d4', '#8338ec'],
                ['#ff006e', '#ffbe0b', '#00f5d4']
            ];
            
            function render(setIndex) {
                const [c1, c2, c3] = colorSets[setIndex];
                let html = `<div class="mobius-strip" id="main-illusion">`;
                
                for (let i = 0; i < 24; i++) {
                    const angle = (i / 24) * Math.PI * 2;
                    const x = 100 + Math.cos(angle) * 80;
                    const y = 100 + Math.sin(angle) * 40;
                    const rotateY = angle * (180 / Math.PI);
                    const twist = i * 15;
                    
                    html += `<div class="segment" style="
                        left: ${x}px;
                        top: ${y}px;
                        transform: rotateY(${rotateY}deg) rotateX(${twist}deg);
                        background: linear-gradient(to bottom, ${c1}, ${c2}, ${c3});
                        opacity: ${0.5 + Math.sin(angle) * 0.5};
                    "></div>`;
                }
                
                html += '</div>';
                container.innerHTML = html;
            }
            
            render(0);
            container.onclick = () => {
                render(clickCount % colorSets.length);
                clickCount++;
            };
        }

        function renderSargent() {
            const container = document.getElementById('illusion-container');
            const patterns = [0, 45, 90, -45];
            let patternIndex = 0;
            
            function render() {
                const angle = patterns[patternIndex];
                container.innerHTML = `
                    <div class="sargent-illusion" id="main-illusion">
                        <div style="
                            width: 100%;
                            height: 100%;
                            background: repeating-linear-gradient(${angle}deg, 
                                #1a1a2e 0px, 
                                #1a1a2e 10px, 
                                #3a3a4e 10px, 
                                #3a3a4e 20px);
                            display: flex;
                            align-items: center;
                            justify-content: center;
                        ">
                            <div style="
                                width: 150px;
                                height: 80px;
                                background: linear-gradient(90deg, #00f5d4, #8338ec);
                                border-radius: 8px;
                                box-shadow: 0 0 30px rgba(0, 245, 212, 0.3);
                            "></div>
                        </div>
                    </div>
                `;
            }
            
            render();
            container.onclick = () => {
                patternIndex = (patternIndex + 1) % patterns.length;
                render();
                clickCount++;
            };
        }
    </script>
</body>
</html>
